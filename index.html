<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Anchor Homes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* --------- GLOBAL STYLES --------- */
    :root {
      --bg-main: #050505;
      --bg-alt: #101010;
      --bg-card: #151515;
      --accent: #ffffff;
      --accent-soft: #d3d3d3;
      --border-subtle: #2b2b2b;
      --error: #ff4d4d;
      --radius-lg: 18px;
      --shadow-soft: 0 22px 50px rgba(0, 0, 0, 0.7);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background-color: var(--bg-main);
      color: var(--accent-soft);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .page-wrapper {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* --------- HEADER & NAV --------- */
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(14px);
      background: linear-gradient(
        to bottom,
        rgba(5, 5, 5, 0.96),
        rgba(5, 5, 5, 0.88)
      );
      border-bottom: 1px solid var(--border-subtle);
    }

    .header-inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.75rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.9rem;
    }

    .brand-logo {
      width: 44px;
      height: 44px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid var(--border-subtle);
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000000;
    }

    .brand-logo img {
      max-width: 100%;
      max-height: 100%;
      display: block;
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 0.12rem;
    }

    .brand-name {
      font-size: 1.15rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent);
    }

    .brand-tagline {
      font-size: 0.8rem;
      color: #9f9f9f;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    nav {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .nav-link {
      font-size: 0.85rem;
      padding: 0.45rem 0.95rem;
      border-radius: 999px;
      border: 1px solid transparent;
      color: #c0c0c0;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease,
        transform 0.1s ease;
      background: transparent;
    }

    .nav-link:hover {
      background: #1c1c1c;
      border-color: var(--border-subtle);
      color: var(--accent);
      transform: translateY(-1px);
    }

    .nav-link.active {
      background: #ffffff;
      color: #000000;
      border-color: #ffffff;
    }

    main {
      flex: 1;
    }

    .content {
      max-width: 1120px;
      margin: 1.5rem auto 2.5rem;
      padding: 0 1.5rem;
    }

    .card {
      background: radial-gradient(circle at top left, #222222 0, #121212 45%, #050505 100%);
      border-radius: var(--radius-lg);
      padding: 1.75rem 1.6rem 2.1rem;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-subtle);
      margin-bottom: 1.5rem;
    }

    .card-header {
      margin-bottom: 1.25rem;
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.9rem;
    }

    .card-title {
      font-size: 1.45rem;
      color: var(--accent);
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .card-subtitle {
      font-size: 0.85rem;
      color: #9f9f9f;
      margin-top: 0.45rem;
    }

    .muted {
      color: #aaaaaa;
      font-size: 0.95rem;
    }

    .two-column {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 2rem;
      align-items: flex-start;
    }

    .info-block {
      margin-bottom: 1rem;
    }

    .info-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #b0b0b0;
      margin-bottom: 0.2rem;
    }

    .info-value {
      font-size: 1rem;
      color: var(--accent);
    }

    /* --------- FORMS --------- */

    form {
      display: grid;
      gap: 1rem;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
    }

    label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: #bbbbbb;
    }

    .label-sub {
      font-size: 0.75rem;
      color: #8c8c8c;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="file"],
    input[type="date"],
    textarea {
      padding: 0.7rem 0.85rem;
      border-radius: 11px;
      border: 1px solid var(--border-subtle);
      background-color: var(--bg-alt);
      color: var(--accent);
      font-size: 0.95rem;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      width: 100%;
    }

    input::placeholder,
    textarea::placeholder {
      color: #777777;
    }

    input:focus,
    textarea:focus {
      border-color: #ffffff;
      box-shadow: 0 0 0 1px #ffffff22;
      background-color: #181818;
    }

    textarea {
      min-height: 130px;
      resize: vertical;
    }

    .hint {
      font-size: 0.8rem;
      color: #8a8a8a;
    }

    .button-row {
      margin-top: 0.5rem;
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .btn {
      border-radius: 999px;
      padding: 0.65rem 1.5rem;
      border: none;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.2s ease,
        color 0.2s ease, border-color 0.2s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background-color: #ffffff;
      color: #000000;
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.6);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 34px rgba(0, 0, 0, 0.8);
    }

    .btn-outline {
      background: transparent;
      color: var(--accent);
      border: 1px solid var(--accent);
    }

    .btn-outline:hover {
      background: #ffffff;
      color: #000000;
    }

    .btn-sm {
      padding: 0.35rem 0.85rem;
      font-size: 0.7rem;
      letter-spacing: 0.14em;
    }

    .required {
      color: var(--error);
      margin-left: 0.1rem;
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(4px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    footer {
      border-top: 1px solid var(--border-subtle);
      padding: 1rem 1.5rem 1.5rem;
      font-size: 0.8rem;
      color: #777777;
      text-align: center;
    }

    /* --------- HERO --------- */
    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 2rem;
      align-items: center;
    }

    .hero-title {
      font-size: 2rem;
      color: var(--accent);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      margin-bottom: 0.75rem;
    }

    .hero-tagline {
      font-size: 1.05rem;
      color: #d0d0d0;
      margin-bottom: 1.25rem;
    }

    .hero-highlights {
      list-style: none;
      padding-left: 1rem;
      margin-bottom: 1.5rem;
    }

    .hero-highlights li::before {
      content: "– ";
      color: #ffffff;
    }

    .hero-image-frame {
      border-radius: var(--radius-lg);
      overflow: hidden;
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-soft);
      background: #000;
      position: relative;
      min-height: 260px;
    }

    .hero-image-frame img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.7s ease;
    }

    .hero-image-frame img.active {
      opacity: 1;
    }

    /* --------- MISC --------- */
    .section-divider {
      height: 1px;
      background: #262626;
      margin: 1.4rem 0;
      border-radius: 999px;
    }

    .pill-label {
      display: inline-block;
      border-radius: 999px;
      border: 1px solid #333333;
      padding: 0.15rem 0.65rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #9c9ccf;
      margin-bottom: 0.45rem;
    }

    /* --------- REVIEWS --------- */
    .reviews {
      margin-top: 1.75rem;
      padding-top: 1.25rem;
      border-top: 1px solid var(--border-subtle);
    }

    .reviews-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
    }

    .reviews-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #cfcfcf;
    }

    .reviews-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #888888;
    }

    .review-quote {
      font-size: 0.95rem;
      color: var(--accent);
      font-style: italic;
      margin-bottom: 0.4rem;
      transition: opacity 0.3s ease;
    }

    .review-author {
      font-size: 0.85rem;
      color: #b0b0b0;
    }

    /* --------- AGREEMENT & W9 STYLES --------- */
    .agreement-box,
    .w9-box {
      background: #0b0b0b;
      border-radius: 12px;
      border: 1px solid #262626;
      padding: 0.9rem 0.95rem;
      max-height: 260px;
      overflow-y: auto;
      font-size: 0.85rem;
      color: #d0d0d0;
      line-height: 1.5;
      margin-bottom: 0.9rem;
    }

    .agreement-box h3,
    .w9-box h3 {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: #f0f0f0;
      margin-bottom: 0.5rem;
    }

    .agreement-box p,
    .w9-box p {
      margin-bottom: 0.45rem;
    }

    .agreement-box ul {
      padding-left: 1.1rem;
      margin-bottom: 0.4rem;
    }

    .signature-block {
      margin-top: 0.75rem;
      border-top: 1px dashed #333333;
      padding-top: 0.75rem;
    }

    .signature-canvas-wrapper {
      margin-top: 0.4rem;
      border-radius: 10px;
      border: 1px dashed #444444;
      background: #050505;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .signature-canvas-wrapper canvas {
      width: 100%;
      height: 100%;
    }

    .inline-inputs {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .inline-inputs .field-group {
      flex: 1 1 120px;
    }

    .w9-tax-classification {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 0.35rem;
      margin-top: 0.35rem;
      font-size: 0.85rem;
    }

    .w9-tax-classification label {
      font-size: 0.8rem;
      text-transform: none;
      letter-spacing: 0;
      display: flex;
      align-items: center;
      gap: 0.35rem;
      color: #d0d0d0;
    }

    .w9-tax-classification input[type="radio"] {
      width: auto;
    }

    .tiny-note {
      font-size: 0.75rem;
      color: #8a8a8a;
    }

    @media (max-width: 768px) {
      .header-inner {
        flex-direction: column;
        align-items: flex-start;
      }

      nav {
        width: 100%;
        justify-content: flex-start;
      }

      .two-column,
      .hero {
        grid-template-columns: minmax(0, 1fr);
      }

      .card {
        padding: 1.25rem 1.1rem 1.7rem;
      }
    }
  </style>
</head>

<body>
  <div class="page-wrapper">
    <header>
      <div class="header-inner">
        <div class="brand">
          <div class="brand-logo">
            <!-- Replace logo.png with your logo file if desired -->
            <img src="logo.png" alt="Anchor Homes logo" />
          </div>
          <div class="brand-text">
            <div class="brand-name">Anchor Homes</div>
            <div class="brand-tagline">Custom Homes &amp; Renovations</div>
          </div>
        </div>

        <nav>
          <button class="nav-link active" data-section="welcome">Welcome</button>
          <button class="nav-link" data-section="about">About Us</button>
          <button class="nav-link" data-section="services">Services</button>
          <button class="nav-link" data-section="change-requests">Change Request</button>
          <button class="nav-link" data-section="subcontractors">Invoices</button>
          <button class="nav-link" data-section="new-subcontractors">New Subcontractors</button>
          <button class="nav-link" data-section="contact">Contact</button>
        </nav>
      </div>
    </header>

    <main>
      <div class="content">
        <!-- --------- WELCOME --------- -->
        <section id="welcome" class="section active">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Welcome</h1>
              <p class="card-subtitle">
                Building homes and spaces that feel solid, simple, and thoughtfully finished.
              </p>
            </div>

            <div class="hero">
              <div>
                <h2 class="hero-title">Anchor Homes</h2>
                <p class="hero-tagline">
                  A builder focused on clear communication, strong structure, and clean design—from
                  first footing to final walk-through.
                </p>
                <ul class="hero-highlights muted">
                  <li>Custom homes and large-scale remodels</li>
                  <li>Light commercial build-outs and improvements</li>
                  <li>Hands-on project management and responsive updates</li>
                </ul>

                <div class="button-row">
                  <button type="button" class="btn btn-outline" data-jump="new-subcontractors">
                    New Subcontractor Setup
                  </button>
                </div>
              </div>

              <div class="hero-image-frame">
                <!-- Replace with your job-site photos later -->
                <img src="stock1.jpg" alt="Home framing in progress" class="hero-slide active" />
                <img src="stock2.jpg" alt="Job site with home under construction" class="hero-slide" />
                <img src="stock3.jpg" alt="Completed new construction home" class="hero-slide" />
              </div>
            </div>

            <!-- CUSTOMER REVIEWS -->
            <div class="reviews">
              <div class="reviews-header">
                <div class="reviews-title">Customer Reviews</div>
                <div class="reviews-label">Rotating every few seconds</div>
              </div>
              <div class="review-quote" id="review-quote"></div>
              <div class="review-author" id="review-author"></div>
            </div>
          </div>
        </section>

        <!-- --------- ABOUT --------- -->
        <section id="about" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">About Us</h1>
              <p class="card-subtitle">
                A brief overview of who you are, what you build, and what sets Anchor Homes apart.
              </p>
            </div>
            <div class="two-column">
              <div>
                <p class="muted">
                  Anchor Homes is a residential and commercial builder focused on clean design,
                  honest communication, and durable craftsmanship. From first walkthrough to final
                  punch list, our goal is to keep every project predictable, transparent, and
                  enjoyable for the families and businesses who trust us.
                </p>
              </div>
              <div>
                <p class="muted">
                  Led by owner <strong style="color:#ffffff;">Austin Bream</strong>, Anchor Homes
                  combines practical job-site experience with a detail-driven planning process.
                  Austin Bream has achieved local legend status not for his athleticism or academic prowess, but for his truly unhinged devotion to raw hotdogs—no buns, no condiments, just cold, slippery tubes of mystery meat straight from the pack. While most folks reach for a grill, Austin reaches for the fridge with the confidence of a man who’s made peace with his choices. Around town, he's affectionately (and somewhat fearfully) known as the “Glizzy Gobbler,” a title he wears like a badge of honor. But it’s the whispered moniker “Throat Goat” that really cements his legacy—earned not through scandal, but through the sheer velocity and volume with which he can down a raw frank. Neighborhood barbecues haven’t been the same since.
                </p>
              </div>
            </div>

            <div class="card" style="margin-top: 1.5rem; background: rgba(5,5,5,0.6);">
              <div class="card-header" style="border-bottom: none; padding-bottom: 0;">
                <h2 class="card-title" style="font-size: 1rem;">Your About Us Content</h2>
              </div>
              <p class="hint" style="margin-top: 0.4rem;">
                Replace this placeholder text with your detailed About Us description in the HTML file.
              </p>
              <p style="margin-top: 0.75rem;">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse placerat dolor
                vitae est interdum, in auctor arcu faucibus.
              </p>
            </div>
          </div>
        </section>

        <!-- --------- SERVICES --------- -->
        <section id="services" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Services</h1>
              <p class="card-subtitle">
                Residential and commercial construction services tailored to your project.
              </p>
            </div>

            <div class="two-column">
              <div>
                <h2 class="info-label" style="margin-bottom:0.4rem;">Residential Construction</h2>
                <ul class="muted" style="padding-left:1.2rem; margin-bottom:1.5rem;">
                  <li>Custom new-home builds</li>
                  <li>Whole-home renovations &amp; gut remodels</li>
                  <li>Kitchen &amp; bath remodels</li>
                  <li>Room additions &amp; second stories</li>
                  <li>Basement &amp; bonus room build-outs</li>
                  <li>Outdoor living spaces, decks, and covered porches</li>
                  <li>Exterior upgrades, siding, roofing, and windows</li>
                </ul>
              </div>
              <div>
                <h2 class="info-label" style="margin-bottom:0.4rem;">Commercial &amp; Light Commercial</h2>
                <ul class="muted" style="padding-left:1.2rem; margin-bottom:1.5rem;">
                  <li>Tenant build-outs and interior finish-outs</li>
                  <li>Office and professional space remodeling</li>
                  <li>Retail and showroom improvements</li>
                  <li>Small business build-to-suit projects</li>
                  <li>Site and accessibility upgrades</li>
                  <li>Ongoing maintenance and small-project work</li>
                </ul>
              </div>
            </div>

            <p class="muted">
              If you don’t see your exact project type listed, reach out—we can usually tailor a
              solution or point you to someone we trust.
            </p>
          </div>
        </section>

        <!-- --------- CHANGE REQUEST --------- -->
        <section id="change-requests" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Change Request</h1>
              <p class="card-subtitle">
                Use this form to request changes to your current Anchor Homes project.
              </p>
            </div>

            <form
              action="https://formspree.io/f/xanrbjlk"
              method="POST"
              accept-charset="UTF-8"
            >
              <input type="hidden" name="form_name" value="Change Request" />

              <div class="field-group">
                <label for="cr-name">
                  Customer Name<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="cr-name"
                  name="customer_name"
                  required
                  placeholder="First and last name"
                />
              </div>

              <div class="field-group">
                <label for="cr-phone">
                  Phone<span class="required">*</span>
                </label>
                <input
                  type="tel"
                  id="cr-phone"
                  name="customer_phone"
                  required
                  placeholder="(555) 555-5555"
                />
              </div>

              <div class="field-group">
                <label for="cr-email">
                  Email<span class="required">*</span>
                </label>
                <input
                  type="email"
                  id="cr-email"
                  name="customer_email"
                  required
                  placeholder="you@example.com"
                />
              </div>

              <div class="field-group">
                <label for="cr-address">
                  Project Address<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="cr-address"
                  name="project_address"
                  required
                  placeholder="Street address, city, state, ZIP"
                />
              </div>

              <div class="field-group">
                <label for="cr-details">
                  Change Request Details<span class="required">*</span>
                </label>
                <textarea
                  id="cr-details"
                  name="change_request_details"
                  required
                  placeholder="Describe the change you are requesting. Include room, finishes, materials, and any timeline notes."
                ></textarea>
                <p class="hint">
                  All change requests are subject to pricing review and schedule impact. Your
                  project manager will follow up to confirm details.
                </p>
              </div>

              <div class="button-row">
                <button type="submit" class="btn btn-primary">
                  Submit Change Request
                </button>
                <button type="reset" class="btn btn-outline">
                  Clear Form
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- --------- INVOICES --------- -->
        <section id="subcontractors" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Invoices</h1>
              <p class="card-subtitle">
                Upload invoices related to Anchor Homes projects for processing and payment.
              </p>
            </div>

            <form
              action="https://formspree.io/f/xanrbjlk"
              method="POST"
              enctype="multipart/form-data"
              accept-charset="UTF-8"
            >
              <input type="hidden" name="form_name" value="Invoice Upload" />

              <div class="field-group">
                <label for="sub-name">
                  Contact Name<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sub-name"
                  name="sub_name"
                  required
                  placeholder="First and last name"
                />
              </div>

              <div class="field-group">
                <label for="sub-company">
                  Company Name<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sub-company"
                  name="sub_company"
                  required
                  placeholder="Business or trade name"
                />
              </div>

              <div class="field-group">
                <label for="sub-email">
                  Email<span class="required">*</span>
                </label>
                <input
                  type="email"
                  id="sub-email"
                  name="sub_email"
                  required
                  placeholder="you@yourcompany.com"
                />
              </div>

              <div class="field-group">
                <label for="sub-phone">
                  Phone<span class="required">*</span>
                </label>
                <input
                  type="tel"
                  id="sub-phone"
                  name="sub_phone"
                  required
                  placeholder="(555) 555-5555"
                />
              </div>

              <div class="field-group">
                <label for="sub-project">
                  Project Name / Address<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sub-project"
                  name="sub_project"
                  required
                  placeholder="Project name or address"
                />
              </div>

              <div class="field-group">
                <label for="sub-amount">
                  Invoice Amount (Optional)
                </label>
                <input
                  type="text"
                  id="sub-amount"
                  name="sub_amount"
                  placeholder="$0.00"
                />
              </div>

              <div class="field-group">
                <label for="sub-file">
                  Upload Invoice<span class="required">*</span>
                </label>
                <input
                  type="file"
                  id="sub-file"
                  name="invoice_file"
                  required
                  accept=".pdf,.jpg,.jpeg,.png,.doc,.docx,.xls,.xlsx"
                />
                <p class="hint">
                  Accepted formats: PDF, image files, Word, or Excel. One file per submission.
                </p>
              </div>

              <div class="field-group">
                <label for="sub-notes">
                  Notes (Optional)
                </label>
                <textarea
                  id="sub-notes"
                  name="sub_notes"
                  placeholder="Any notes related to this invoice, work completed, or billing period."
                ></textarea>
              </div>

              <div class="button-row">
                <button type="submit" class="btn btn-primary">
                  Submit Invoice
                </button>
                <button type="reset" class="btn btn-outline">
                  Clear Form
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- --------- NEW SUBCONTRACTORS (AGREEMENT + W9) --------- -->
        <section id="new-subcontractors" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">New Subcontractors</h1>
              <p class="card-subtitle">
                Complete the Subcontractors Agreement and W-9 so we can add you to our system.
              </p>
            </div>

            <form
              id="new-subcontractor-form"
              action="https://formspree.io/f/xdkqdpgd"
              method="POST"
              accept-charset="UTF-8"
            >
              <input type="hidden" name="form_name" value="New Subcontractor Agreement and W9" />

              <!-- BASIC INFO -->
              <span class="pill-label">Step 1 · Subcontractor Information</span>

              <div class="field-group">
                <label for="sc-company">
                  Company / Subcontractor Name<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sc-company"
                  name="sc_company_name"
                  required
                  placeholder="Legal business name"
                />
              </div>

              <div class="field-group">
                <label for="sc-contact">
                  Contact Name<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sc-contact"
                  name="sc_contact_name"
                  required
                  placeholder="First and last name"
                />
              </div>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="sc-email">
                    Email<span class="required">*</span>
                  </label>
                  <input
                    type="email"
                    id="sc-email"
                    name="sc_email"
                    required
                    placeholder="you@yourcompany.com"
                  />
                </div>
                <div class="field-group">
                  <label for="sc-phone">
                    Phone<span class="required">*</span>
                  </label>
                  <input
                    type="tel"
                    id="sc-phone"
                    name="sc_phone"
                    required
                    placeholder="(555) 555-5555"
                  />
                </div>
              </div>

              <div class="field-group">
                <label for="sc-address">
                  Mailing Address<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sc-address"
                  name="sc_address"
                  required
                  placeholder="Street address"
                />
              </div>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="sc-city">
                    City<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="sc-city"
                    name="sc_city"
                    required
                    placeholder="City"
                  />
                </div>
                <div class="field-group">
                  <label for="sc-state">
                    State<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="sc-state"
                    name="sc_state"
                    required
                    placeholder="ST"
                  />
                </div>
                <div class="field-group">
                  <label for="sc-zip">
                    ZIP<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="sc-zip"
                    name="sc_zip"
                    required
                    placeholder="00000"
                  />
                </div>
              </div>

              <div class="field-group">
                <label for="sc-trade">
                  Primary Trade / Scope of Work<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="sc-trade"
                  name="sc_trade"
                  required
                  placeholder="Example: framing, electrical, drywall, etc."
                />
              </div>

              <div class="section-divider"></div>

              <!-- SUBCONTRACTOR AGREEMENT -->
              <span class="pill-label">Step 2 · Subcontractors Agreement</span>

              <div class="agreement-box">
                <h3>Subcontractors Agreement</h3>

                <p>
                  This document is a binding contract, which will serve as a blanket agreement for and between
                  <strong>Kristina Chapman Contractor Dba Chapman &amp; Chapman Homes</strong> (herein known as
                  <strong>Builder</strong>) and the undersigned (herein known as <strong>Subcontractor</strong>).
                  By signing, Subcontractor and Builder agree to the terms set forth herein. This agreement shall remain
                  in force from the date hereof and from year to year unless changed in writing by both parties.
                </p>

                <p><strong>1. GENERAL PERFORMANCE</strong><br />
                  All work of the Subcontractor will be performed in a good and workmanlike manner in accordance with
                  the plans and specifications for each job and must comply with all applicable laws, codes, ordinances,
                  and regulations. All permits, fees, taxes, and expenses connected with such compliance are to be paid
                  by the Subcontractor.
                </p>

                <p><strong>2. INDEPENDENT CONTRACTOR</strong><br />
                  The Builder and Subcontractor agree that the Subcontractor is being hired solely as an independent
                  contractor and that neither the Subcontractor nor Subcontractor’s employees shall be deemed to be
                  employees of the Builder.
                </p>

                <p><strong>3. TIME</strong><br />
                  The Subcontractor agrees to promptly begin work as soon as notified by the Builder, and to complete
                  the work in a professional manner within a reasonable period of time and by any deadlines established
                  by the Builder in writing. Subcontractor shall coordinate with other trades to allow each to complete
                  its work on schedule and shall provide proper supervision, labor, and materials to maintain the
                  Builder’s schedule. If Subcontractor’s work does not conform to plans, specifications, or quality
                  standards, Builder may require correction or may correct the work and back charge the Subcontractor.
                </p>

                <p><strong>4. EXTRAS</strong><br />
                  No deviations from the work specified in the contract will be permitted or paid for unless a written
                  extra work or change order is first agreed upon and signed as required.
                </p>

                <p><strong>5. ASSIGNMENT</strong><br />
                  No assignment of this subcontract agreement by Subcontractor is permitted without prior written
                  permission from the Builder.
                </p>

                <p><strong>6. HOLD HARMLESS</strong><br />
                  The Subcontractor agrees to protect, defend, and indemnify the Builder against, and hold the Builder
                  harmless for, any and all claims, demands, liabilities, losses, expenses, suits, and actions (including
                  attorney’s fees) arising out of or in connection with the work covered by this subcontract, except to
                  the extent a claim is determined to be attributable solely to the fault or negligence of the Builder.
                  Builder may withhold funds to protect against such claims.
                </p>

                <p><strong>7. MECHANICS LIEN</strong><br />
                  Subcontractor shall furnish all partial and final lien waivers and sworn statements as required by the
                  Builder. If any lien, encumbrance, or claim of nonpayment is asserted against the Builder’s property
                  arising out of Subcontractor’s work, Subcontractor shall protect, indemnify, and hold the Builder
                  harmless from all such liens and related costs and expenses.
                </p>

                <p><strong>8. CLEAN-UP</strong><br />
                  Subcontractor agrees to clean up all debris, trash, and refuse generated by its trade at the end of each
                  day and to leave the job broom clean. Failure to do so after notice may result in clean-up by Builder
                  and back charge to Subcontractor.
                </p>

                <p><strong>9. DEFAULT</strong><br />
                  If Subcontractor defaults in performance of any duties or obligations hereunder and such default
                  continues after notice, Builder may immediately terminate this Agreement. Subcontractor shall be due
                  only such sums for approved work up to termination and shall furnish lien waivers upon payment.
                </p>

                <p><strong>10. CARE OF MATERIALS</strong><br />
                  Subcontractor agrees to properly care for materials supplied by Builder, storing them to protect from
                  damage and disposing of unusable materials responsibly. Builder may back charge Subcontractor for
                  materials damaged by negligent care.
                </p>

                <p><strong>11. PAYMENT</strong><br />
                  Builder shall provide time frames for Subcontractor to submit invoices. Late invoices will be processed
                  in the next pay period. Invoices in dispute may be held until resolution, and payment for disputed
                  amounts may be withheld from any sums due.
                </p>

                <p><strong>12. INSURANCE</strong><br />
                  Subcontractor shall provide Builder with a Certificate of Insurance showing the following coverage and
                  shall maintain such coverage during the contract period (with 30 days’ written notice of cancellation
                  or non-renewal):
                </p>
                <ul>
                  <li>Commercial General Liability with limits at or above:
                    <br />$1,000,000 each occurrence / $2,000,000 general aggregate /
                    $2,000,000 products-completed operations aggregate (Builder named as additional insured).</li>
                  <li>Workers Compensation Insurance covering all persons performing work at Builder’s job sites.</li>
                  <li>Automobile Liability Insurance for vehicles used at or to/from jobsites with minimum coverage of
                    $500,000 per accident.</li>
                </ul>

                <p><strong>Health and Safety:</strong> Subcontractor agrees to comply with all applicable health and
                  safety requirements, supply required protective equipment to its workers, and accept responsibility
                  for penalties and costs resulting from non-compliance.
                </p>

                <p><strong>13. CONDUCT</strong><br />
                  Subcontractor’s employees and agents shall conduct themselves professionally, free from drugs or
                  alcohol on the job site. Subcontractor agrees to comply with any applicable drug-testing policy in the
                  event of an accident and will not enter into any agreement directly with Builder’s customer regarding
                  the property while it is under construction.
                </p>

                <p><strong>14. MAINTENANCE OF EROSION CONTROL</strong><br />
                  Subcontractor shall not disturb erosion control systems on site. Any moved silt fencing or other
                  measures shall be promptly restored, and Subcontractor shall indemnify Builder for any damages or
                  fines resulting from their disturbance.
                </p>

                <p><strong>15. ARBITRATION</strong><br />
                  Any dispute arising under this Agreement, or regarding the meaning of the Drawings or Specifications,
                  shall be resolved by binding arbitration as the sole remedy. Each party shall select one arbitrator, and
                  the two arbitrators shall select a third. The decision of a majority shall be final and binding, and the
                  expense of arbitration shall be borne equally by Builder and Subcontractor.
                </p>

                <p><strong>16. WARRANTY</strong><br />
                  Subcontractor warrants against defects in workmanship and materials supplied by Subcontractor for a
                  period of one year from the date the home is first occupied by the homeowner, on the same standards
                  and duration as the Builder’s warranty provided to the Owner.
                </p>
              </div>

              <div class="field-group">
                <label>
                  <input type="checkbox" name="agreement_read_ack" required />
                  &nbsp;I have read and agree to the Subcontractors Agreement above.
                </label>
              </div>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="sc-agreement-name">
                    Subcontractor Name (for Agreement)<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="sc-agreement-name"
                    name="agreement_subcontractor_name"
                    required
                    placeholder="Name of Subcontractor / Company"
                  />
                </div>
                <div class="field-group">
                  <label for="sc-agreement-title">
                    Title
                  </label>
                  <input
                    type="text"
                    id="sc-agreement-title"
                    name="agreement_subcontractor_title"
                    placeholder="Owner, Manager, etc."
                  />
                </div>
              </div>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="sc-agreement-date">
                    Agreement Date<span class="required">*</span>
                  </label>
                  <input
                    type="date"
                    id="sc-agreement-date"
                    name="agreement_date"
                    required
                  />
                </div>
                <div class="field-group">
                  <label for="sc-arb-initials">
                    Arbitration Initials<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="sc-arb-initials"
                    name="agreement_arbitration_initials"
                    required
                    placeholder="Initials to acknowledge arbitration clause"
                  />
                </div>
              </div>

              <div class="signature-block">
                <div class="info-label">Subcontractor Signature (draw)</div>
                <p class="tiny-note">
                  Use your finger (on mobile) or mouse (on desktop) to sign inside the box. You can clear and redraw if needed.
                </p>
                <div class="signature-canvas-wrapper">
                  <canvas id="agreement-signature"></canvas>
                </div>
                <div class="button-row">
                  <button type="button" class="btn btn-outline btn-sm" id="agreement-clear">
                    Clear Signature
                  </button>
                </div>
                <div class="field-group" style="margin-top:0.5rem;">
                  <label for="agreement-signature-name">
                    Typed Name (Signature)<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="agreement-signature-name"
                    name="agreement_typed_signature_name"
                    required
                    placeholder="Type your full name as signature"
                  />
                </div>
              </div>

              <div class="section-divider"></div>

              <!-- W9 SECTION -->
              <span class="pill-label">Step 3 · W-9 (Taxpayer Identification)</span>

              <div class="w9-box">
                <h3>Form W-9 – Request for Taxpayer Identification Number and Certification</h3>
                <p class="tiny-note">
                  This section collects the same information as IRS Form W-9, page 1. Please complete all
                  required fields so we can issue any required tax forms (such as Form 1099).
                </p>
              </div>

              <div class="field-group">
                <label for="w9-name">
                  Name (as shown on your income tax return)<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="w9-name"
                  name="w9_name"
                  required
                  placeholder="Exact name from your tax return"
                />
              </div>

              <div class="field-group">
                <label for="w9-business">
                  Business name / disregarded entity name (if different from above)
                </label>
                <input
                  type="text"
                  id="w9-business"
                  name="w9_business_name"
                  placeholder="Business or DBA name"
                />
              </div>

              <div class="field-group">
                <label>
                  Federal Tax Classification<span class="required">*</span>
                </label>
                <div class="w9-tax-classification">
                  <label>
                    <input type="radio" name="w9_tax_class" value="individual/sole proprietor" required />
                    Individual / sole proprietor or single-member LLC
                  </label>
                  <label>
                    <input type="radio" name="w9_tax_class" value="c_corporation" />
                    C Corporation
                  </label>
                  <label>
                    <input type="radio" name="w9_tax_class" value="s_corporation" />
                    S Corporation
                  </label>
                  <label>
                    <input type="radio" name="w9_tax_class" value="partnership" />
                    Partnership
                  </label>
                  <label>
                    <input type="radio" name="w9_tax_class" value="trust/estate" />
                    Trust / Estate
                  </label>
                  <label>
                    <input type="radio" name="w9_tax_class" value="llc_other" />
                    Limited liability company (enter tax classification in box below)
                  </label>
                </div>
              </div>

              <div class="field-group">
                <label for="w9-llc-class">
                  If LLC, enter tax classification (C = C corp, S = S corp, P = Partnership)
                </label>
                <input
                  type="text"
                  id="w9-llc-class"
                  name="w9_llc_tax_classification"
                  placeholder="C, S, or P"
                />
              </div>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="w9-exempt-payee">
                    Exempt payee code (if any)
                  </label>
                  <input
                    type="text"
                    id="w9-exempt-payee"
                    name="w9_exempt_payee_code"
                    placeholder=""
                  />
                </div>
                <div class="field-group">
                  <label for="w9-fatca">
                    Exemption from FATCA reporting code (if any)
                  </label>
                  <input
                    type="text"
                    id="w9-fatca"
                    name="w9_fatca_code"
                    placeholder=""
                  />
                </div>
              </div>

              <div class="field-group">
                <label for="w9-address">
                  Address (number, street, and apt. or suite no.)<span class="required">*</span>
                </label>
                <input
                  type="text"
                  id="w9-address"
                  name="w9_address"
                  required
                  placeholder="Street address"
                />
              </div>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="w9-city">
                    City<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="w9-city"
                    name="w9_city"
                    required
                    placeholder="City"
                  />
                </div>
                <div class="field-group">
                  <label for="w9-state">
                    State<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="w9-state"
                    name="w9_state"
                    required
                    placeholder="ST"
                  />
                </div>
                <div class="field-group">
                  <label for="w9-zip">
                    ZIP<span class="required">*</span>
                  </label>
                  <input
                    type="text"
                    id="w9-zip"
                    name="w9_zip"
                    required
                    placeholder="00000"
                  />
                </div>
              </div>

              <div class="field-group">
                <label for="w9-account-nums">
                  List account number(s) here (optional)
                </label>
                <input
                  type="text"
                  id="w9-account-nums"
                  name="w9_account_numbers"
                  placeholder="Account numbers, if any"
                />
              </div>

              <div class="section-divider"></div>

              <!-- TIN -->
              <span class="pill-label">Step 4 · Taxpayer Identification Number</span>

              <p class="tiny-note">
                Enter your Social Security Number (SSN) or Employer Identification Number (EIN). Do not enter both unless applicable.
              </p>

              <div class="inline-inputs">
                <div class="field-group">
                  <label for="w9-ssn">
                    Social Security Number (SSN)
                  </label>
                  <input
                    type="text"
                    id="w9-ssn"
                    name="w9_ssn"
                    placeholder="XXX-XX-XXXX"
                  />
                </div>
                <div class="field-group">
                  <label for="w9-ein">
                    Employer Identification Number (EIN)
                  </label>
                  <input
                    type="text"
                    id="w9-ein"
                    name="w9_ein"
                    placeholder="XX-XXXXXXX"
                  />
                </div>
              </div>

              <p class="tiny-note">
                By signing below, you certify that: (1) the number shown above is your correct taxpayer
                identification number (or you are waiting for a number to be issued); (2) you are not
                subject to backup withholding (unless otherwise indicated to us); and (3) you are a U.S.
                person (including a U.S. resident alien).
              </p>

              <div class="signature-block">
                <div class="info-label">W-9 Signature (draw)</div>
                <p class="tiny-note">
                  Use your finger (on mobile) or mouse (on desktop) to sign inside the box. You can clear and redraw if needed.
                </p>
                <div class="signature-canvas-wrapper">
                  <canvas id="w9-signature"></canvas>
                </div>
                <div class="button-row">
                  <button type="button" class="btn btn-outline btn-sm" id="w9-clear">
                    Clear W-9 Signature
                  </button>
                </div>
                <div class="inline-inputs" style="margin-top:0.5rem;">
                  <div class="field-group">
                    <label for="w9-signature-name">
                      Typed Name (Signature)<span class="required">*</span>
                    </label>
                    <input
                      type="text"
                      id="w9-signature-name"
                      name="w9_typed_signature_name"
                      required
                      placeholder="Type your full name as signature"
                    />
                  </div>
                  <div class="field-group">
                    <label for="w9-signature-date">
                      Date<span class="required">*</span>
                    </label>
                    <input
                      type="date"
                      id="w9-signature-date"
                      name="w9_signature_date"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="section-divider"></div>

              <!-- SUBMIT -->
              <span class="pill-label">Step 5 · Submit</span>
              <p class="tiny-note">
                When you click Submit, your subcontractor information, agreement details, W-9 data, and signature images
                will be combined into a signed PDF and sent securely to Anchor Homes via Formspree.
              </p>

              <div class="button-row">
                <button type="submit" class="btn btn-primary">
                  Submit to Anchor Homes
                </button>
                <button type="reset" class="btn btn-outline">
                  Clear All
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- --------- CONTACT --------- -->
        <section id="contact" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Contact</h1>
              <p class="card-subtitle">
                Reach out to Anchor Homes for questions, consultations, or project updates.
              </p>
            </div>

            <div class="two-column">
              <div>
                <div class="info-block">
                  <div class="info-label">Phone</div>
                  <div class="info-value">(555) 555-5555</div>
                </div>
                <div class="info-block">
                  <div class="info-label">Email</div>
                  <div class="info-value">
                    <a href="mailto:info@anchorhomes.com">info@anchorhomes.com</a>
                  </div>
                </div>
                <div class="info-block">
                  <div class="info-label">Business Address</div>
                  <div class="info-value">
                    1234 Anchor Way<br />
                    Suite 100<br />
                    Your City, ST 00000
                  </div>
                </div>
              </div>

              <div>
                <p class="muted">
                  Office hours, service areas, or additional contact notes can be listed here. For
                  example: “Meetings by appointment only,” or “Serving Williamson County and the
                  Greater Nashville area.”
                </p>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer>
      &copy; <span id="year"></span> Anchor Homes. All rights reserved.
    </footer>
  </div>

  <!-- Signature Pad for drawing signatures -->
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
  <!-- html2pdf for generating PDF (0.10.1, official Worker API) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      /* ----- NAVIGATION ----- */
      const navLinks = document.querySelectorAll(".nav-link");
      const sections = document.querySelectorAll(".section");

      function activateSection(targetId) {
        navLinks.forEach((l) => {
          const id = l.getAttribute("data-section");
          l.classList.toggle("active", id === targetId);
        });
        sections.forEach((section) => {
          section.classList.toggle("active", section.id === targetId);
        });
      }

      navLinks.forEach((link) => {
        link.addEventListener("click", () => {
          const targetId = link.getAttribute("data-section");
          activateSection(targetId);
        });
      });

      document.querySelectorAll("[data-jump]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.getAttribute("data-jump");
          activateSection(targetId);
        });
      });

      /* ----- FOOTER YEAR ----- */
      const yearSpan = document.getElementById("year");
      if (yearSpan) yearSpan.textContent = new Date().getFullYear();

      /* ----- HERO SLIDESHOW ----- */
      const slides = Array.from(document.querySelectorAll(".hero-slide"));
      if (slides.length > 1) {
        let order = slides.map((_, idx) => idx);
        function shuffle(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
        }
        shuffle(order);
        let pointer = 0;
        function showNextSlide() {
          const index = order[pointer];
          slides.forEach((slide, i) => {
            slide.classList.toggle("active", i === index);
          });
          pointer++;
          if (pointer >= order.length) {
            pointer = 0;
            shuffle(order);
          }
        }
        showNextSlide();
        setInterval(showNextSlide, 5000);
      }

      /* ----- CUSTOMER REVIEWS ROTATOR ----- */
      const reviews = [
        {
          name: "Danny H.",
          text: "Anchor Homes LLC made our renovation stress-free. Professional team, clear communication, and excellent results!",
        },
        {
          name: "Alex B.",
          text: "We hired Anchor Homes LLC for a kitchen remodel and couldn’t be happier. Quality craftsmanship and on-time delivery.",
        },
        {
          name: "Mike Oxard",
          text: "Dependable, detail-oriented, and honest. Anchor Homes LLC exceeded our expectations on both budget and timeline.",
        },
        {
          name: "Puff Daddy",
          text: "From start to finish, Anchor Homes LLC handled our project with care. Highly recommend for any home improvement needs.",
        },
        {
          name: "Donnie K.",
          text: "Anchor Homes LLC transformed our outdated space beautifully. Friendly crew, fair pricing, and outstanding work.",
        },
      ];

      const quoteEl = document.getElementById("review-quote");
      const authorEl = document.getElementById("review-author");

      if (quoteEl && authorEl && reviews.length > 0) {
        let order = reviews.map((_, idx) => idx);

        function shuffleReviews(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
        }

        shuffleReviews(order);
        let idxPointer = 0;

        function showNextReview() {
          const idx = order[idxPointer];
          const review = reviews[idx];
          quoteEl.style.opacity = 0;
          authorEl.style.opacity = 0;

          setTimeout(() => {
            quoteEl.textContent = `“${review.text}”`;
            authorEl.textContent = `— ${review.name}`;
            quoteEl.style.opacity = 1;
            authorEl.style.opacity = 1;
          }, 200);

          idxPointer++;
          if (idxPointer >= order.length) {
            idxPointer = 0;
            shuffleReviews(order);
          }
        }

        showNextReview();
        setInterval(showNextReview, 5000);
      }

      /* ----- SIGNATURE PADS FOR NEW SUBCONTRACTOR FORM ----- */
      function initSignaturePad(canvasId) {
        const canvas = document.getElementById(canvasId);
        if (!canvas || !window.SignaturePad) return null;

        const resizeCanvas = () => {
          const ratio = Math.max(window.devicePixelRatio || 1, 1);
          const rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * ratio;
          canvas.height = rect.height * ratio;
          const ctx = canvas.getContext("2d");
          ctx.scale(ratio, ratio);
        };
        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);

        return new SignaturePad(canvas, {
          backgroundColor: "#050505",
          penColor: "#ffffff",
        });
      }

      const agreementPadInstance = initSignaturePad("agreement-signature");
      const w9PadInstance = initSignaturePad("w9-signature");
      window.agreementPad = agreementPadInstance;
      window.w9Pad = w9PadInstance;

      const agreementClear = document.getElementById("agreement-clear");
      if (agreementClear && agreementPadInstance) {
        agreementClear.addEventListener("click", () => agreementPadInstance.clear());
      }

      const w9Clear = document.getElementById("w9-clear");
      if (w9Clear && w9PadInstance) {
        w9Clear.addEventListener("click", () => w9PadInstance.clear());
      }

      /* ----- NEW SUBCONTRACTOR CUSTOM SUBMIT WITH PDF ----- */
      const subForm = document.getElementById("new-subcontractor-form");
      if (subForm) {
        subForm.addEventListener("submit", async (e) => {
          e.preventDefault();

          if (typeof window.html2pdf === "undefined") {
            alert("Unable to submit right now (PDF library not loaded). Please try again.");
            console.error("html2pdf is not defined. Check that the html2pdf script tag is loading correctly.");
            return;
          }
          if (!window.agreementPad || window.agreementPad.isEmpty()) {
            alert("Please sign the Subcontractors Agreement before submitting.");
            return;
          }
          if (!window.w9Pad || window.w9Pad.isEmpty()) {
            alert("Please sign the W-9 section before submitting.");
            return;
          }

          const submitBtn = subForm.querySelector('button[type="submit"]');
          const originalBtnText = submitBtn ? submitBtn.textContent : "";
          if (submitBtn) {
            submitBtn.disabled = true;
            submitBtn.textContent = "Submitting...";
          }

          try {
            const fd = new FormData(subForm);
            const getVal = (name) => {
              const v = fd.get(name);
              return v == null ? "" : v.toString();
            };

            // Signatures as data URLs (not strictly needed for PDF, but kept if you want them in the email)
            const agreementSigDataUrl = window.agreementPad.toDataURL("image/png");
            const w9SigDataUrl = window.w9Pad.toDataURL("image/png");

            const pdfElement = document.getElementById("new-subcontractors");
            if (!pdfElement) {
              throw new Error("PDF element (#new-subcontractors) not found.");
            }

            const opt = {
              margin: [10, 10, 10, 10],
              filename: "Signed_Agreement_W9.pdf",
              image: { type: "jpeg", quality: 0.96 },
              html2canvas: { scale: 2 },
              jsPDF: { unit: "mm", format: "letter", orientation: "portrait" },
            };

            // Use official Worker API: output('blob')
            const pdfBlob = await html2pdf().set(opt).from(pdfElement).output("blob");

            // Build the payload for Formspree
            const sendData = new FormData();
            sendData.append("form_name", "New Subcontractor Agreement and W9");
            sendData.append("sc_company_name", getVal("sc_company_name"));
            sendData.append("sc_contact_name", getVal("sc_contact_name"));
            sendData.append("sc_email", getVal("sc_email"));
            sendData.append("sc_phone", getVal("sc_phone"));

            // Include all original fields too
            fd.forEach((value, key) => {
              if (!sendData.has(key)) {
                sendData.append(key, value);
              }
            });

            // Optionally include signature data URLs as fields (for reference)
            sendData.append("agreement_signature_image", agreementSigDataUrl);
            sendData.append("w9_signature_image", w9SigDataUrl);

            // Attach the generated PDF
            sendData.append("signed_pdf", pdfBlob, "Signed_Agreement_W9.pdf");

            const response = await fetch("https://formspree.io/f/xdkqdpgd", {
              method: "POST",
              body: sendData,
              headers: { Accept: "application/json" },
            });

            if (response.ok) {
              alert("Thank you. Your signed agreement and W-9 have been submitted.");
              subForm.reset();
              if (window.agreementPad) window.agreementPad.clear();
              if (window.w9Pad) window.w9Pad.clear();
            } else {
              alert("There was a problem submitting the form. Please try again or contact Anchor Homes directly.");
            }
          } catch (err) {
            console.error(err);
            alert("An unexpected error occurred while creating the PDF. Please try again.");
          } finally {
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.textContent = originalBtnText || "Submit to Anchor Homes";
            }
          }
        });
      }
    });
  </script>
</body>
</html>
