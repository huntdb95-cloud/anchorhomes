<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Anchor Homes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />


  <style>
    /* --------- GLOBAL STYLES --------- */
    :root {
      --bg-main: #050505;
      --bg-alt: #101010;
      --bg-card: #151515;
      --accent: #ffffff;
      --accent-soft: #d3d3d3;
      --border-subtle: #2b2b2b;
      --danger: #ff4b4b;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.55);
      --radius-lg: 22px;
      --radius-md: 14px;
      --radius-pill: 999px;
      --text-main: #f6f6f6;
      --text-muted: #acacac;
      --text-soft: #a0a0a0;
      --input-bg: #111111;
      --input-border: #2b2b2b;
      --input-border-focus: #f6f6f6;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #262626 0, #050505 52%) fixed;
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    h1,
    h2,
    h3 {
      margin: 0;
      letter-spacing: 0.02em;
    }

    p {
      margin: 0;
      line-height: 1.6;
    }

    a {
      color: var(--accent-soft);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* --------- LAYOUT --------- */
    .page-wrap {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      color: var(--text-main);
    }

    header {
      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(26px);
      background: radial-gradient(circle at top left, #262626 0, #050505 45%);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    .header-inner {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0.9rem 1.5rem 0.85rem;
      display: flex;
      align-items: center;
      gap: 1.25rem;
    }

    .brand-lockup {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      min-width: 0;
    }

    .brand-logo {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background: radial-gradient(circle at 0% 0%, #ffffff 0, #e0e0e0 40%, #9a9a9a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 16px 30px rgba(0, 0, 0, 0.45);
      overflow: hidden;
    }

    .brand-logo img {
      max-width: 110%;
      max-height: 110%;
      display: block;
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .brand-name {
      font-size: 1.05rem;
      font-weight: 650;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #ffffff;
    }

    .brand-tagline {
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    nav {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-left: auto;
    }

    .nav-link {
      background: rgba(255, 255, 255, 0.03);
      border-radius: 999px;
      padding: 0.45rem 0.95rem;
      border: 1px solid transparent;
      color: var(--text-soft);
      font-size: 0.78rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 550;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    .nav-link:hover {
      background: #1c1c1c;
      border-color: rgba(255, 255, 255, 0.08);
      color: #ffffff;
    }

    .nav-link.active {
      background: #ffffff;
      color: #000000;
      border-color: #ffffff;
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.8);
    }

    .nav-link.active::before {
      content: "";
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: #000000;
    }

    main {
      flex: 1;
    }

    .content {
      max-width: 1120px;
      margin: 0 auto;
      padding: 1.8rem 1.5rem 2.5rem;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.2fr);
      gap: 1.6rem;
      align-items: flex-start;
    }

    /* --------- HERO / WELCOME --------- */
    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.35fr);
      gap: 1.6rem;
      margin-bottom: 1.6rem;
    }

    .hero-copy {
      display: flex;
      flex-direction: column;
      gap: 1.1rem;
      justify-content: center;
    }

    .hero-eyebrow {
      font-size: 0.78rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent-soft);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .hero-eyebrow-badge {
      padding: 0.1rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.16), transparent 60%);
      font-size: 0.68rem;
      color: var(--accent-soft);
    }

    .hero-title {
      font-size: 2.35rem;
      line-height: 1.12;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .hero-title span {
      display: block;
      color: #f0f0f0;
    }

    .hero-body {
      font-size: 0.95rem;
      color: var(--text-soft);
      max-width: 32rem;
    }

    .hero-cta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.7rem;
      margin-top: 0.8rem;
    }

    .btn {
      border-radius: var(--radius-pill);
      padding: 0.6rem 1.2rem;
      border: 1px solid transparent;
      background: rgba(255, 255, 255, 0.06);
      color: var(--text-main);
      font-size: 0.82rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-weight: 550;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      transition: all 0.18s ease;
    }

    .btn-primary {
      background: #ffffff;
      color: #000000;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.85);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 36px rgba(0, 0, 0, 0.9);
    }

    .btn-outline {
      background: transparent;
      border-color: rgba(255, 255, 255, 0.25);
      color: var(--accent-soft);
    }

    .btn-outline:hover {
      background: rgba(255, 255, 255, 0.08);
    }

    .hero-secondary-text {
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-top: 0.45rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
      flex-wrap: wrap;
    }

    .hero-secondary-text span.pill {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      padding: 0.15rem 0.6rem;
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .hero-media {
      position: relative;
      min-height: 260px;
    }

    .hero-frame {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: 30px;
      overflow: hidden;
      background: radial-gradient(circle at 10% 0, #ffffff 0, #777777 40%, #222222 100%);
      box-shadow: var(--shadow-soft);
    }

    .hero-media-overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(0, 0, 0, 0.1) 0, rgba(0, 0, 0, 0.9) 55%);
      pointer-events: none;
    }

    .hero-media-inner {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-rows: minmax(0, 1fr) auto;
    }

    .hero-slides {
      position: relative;
      overflow: hidden;
    }

    .hero-slide {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .hero-slide.active {
      opacity: 1;
    }

    .hero-slide:nth-child(1) {
      background-image: url("https://images.pexels.com/photos/1571460/pexels-photo-1571460.jpeg?auto=compress&cs=tinysrgb&w=1200");
    }

    .hero-slide:nth-child(2) {
      background-image: url("https://images.pexels.com/photos/106399/pexels-photo-106399.jpeg?auto=compress&cs=tinysrgb&w=1200");
    }

    .hero-slide:nth-child(3) {
      background-image: url("https://images.pexels.com/photos/259588/pexels-photo-259588.jpeg?auto=compress&cs=tinysrgb&w=1200");
    }

    .hero-slide-gradient {
      position: absolute;
      inset: auto 0 0;
      height: 45%;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.95), transparent);
    }

    .hero-meta-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.65rem 0.9rem;
      background: linear-gradient(
        to right,
        rgba(0, 0, 0, 0.92),
        rgba(4, 4, 4, 0.95),
        rgba(0, 0, 0, 0.92)
      );
      border-top: 1px solid rgba(255, 255, 255, 0.08);
    }

    .hero-meta-primary {
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
    }

    .hero-meta-title {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--accent-soft);
    }

    .hero-meta-subtitle {
      font-size: 0.74rem;
      color: var(--text-soft);
    }

    .hero-metrics {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
    }

    .hero-metrics span {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .hero-metrics span::before {
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #777777);
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.12);
    }

    /* --------- SECTIONS / CARDS --------- */
    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    .card {
      background: radial-gradient(circle at top left, #232323 0, #141414 46%, #050505 100%);
      border-radius: 26px;
      padding: 1.35rem 1.4rem 1.8rem;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255, 255, 255, 0.08);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -10%;
      background: radial-gradient(
        circle at top left,
        rgba(255, 255, 255, 0.08),
        transparent 55%
      );
      opacity: 0.5;
      pointer-events: none;
    }

    .card > * {
      position: relative;
      z-index: 1;
    }

    .card-header {
      margin-bottom: 1.2rem;
    }

    .card-title {
      font-size: 1.35rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      margin-bottom: 0.25rem;
    }

    .card-subtitle {
      font-size: 0.9rem;
      color: var(--text-soft);
      max-width: 32rem;
    }

    .pill-label {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.12rem 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      margin-bottom: 0.4rem;
    }

    .pill-label::before {
      content: "";
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #888888);
    }

    .muted {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .tiny-note {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .section-divider {
      height: 1px;
      border-radius: 999px;
      background: linear-gradient(
        to right,
        transparent,
        rgba(255, 255, 255, 0.14),
        transparent
      );
      margin: 1.2rem 0 1.0rem;
    }

    .two-column {
      display: grid;
      grid-template-columns: minmax(0, 1.05fr) minmax(0, 1.2fr);
      gap: 1.5rem;
      align-items: flex-start;
    }

    .info-block {
      margin-bottom: 0.65rem;
    }

    .info-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-soft);
      margin-bottom: 0.15rem;
    }

    .info-value {
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.4rem;
    }

    .badge {
      padding: 0.15rem 0.65rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      font-size: 0.72rem;
      color: var(--text-muted);
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    footer {
      border-top: 1px solid rgba(255, 255, 255, 0.06);
      padding: 0.9rem 1.5rem 1.1rem;
      font-size: 0.78rem;
      text-align: center;
      color: var(--text-muted);
      background: #050505;
    }

    /* --------- FORM ELEMENTS --------- */
    form {
      margin-top: 0.4rem;
    }

    .form-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 0.75rem 1rem;
    }

    .form-grid-3 {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.75rem 1rem;
    }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
    }

    .form-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-soft);
    }

    .form-label span {
      color: var(--accent-soft);
      margin-left: 0.1rem;
    }

    .form-input,
    .form-select,
    .form-textarea {
      background: var(--input-bg);
      border-radius: 14px;
      border: 1px solid var(--input-border);
      padding: 0.55rem 0.7rem;
      font-size: 0.9rem;
      color: var(--text-main);
      outline: none;
      transition: border-color 0.18s ease, box-shadow 0.18s ease,
        background-color 0.18s ease;
      font-family: inherit;
      min-width: 0;
    }

    .form-input::placeholder,
    .form-textarea::placeholder {
      color: #555555;
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
      border-color: var(--input-border-focus);
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.15);
      background-color: #141414;
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    .helper-text {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.1rem;
    }

    .switch-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.3rem;
    }

    .switch-row input[type="checkbox"] {
      width: 1rem;
      height: 1rem;
      accent-color: #ffffff;
    }

    .subtle-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.15rem 0.65rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
    }

    .subtle-chip span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #777777);
    }

    .badge-pill {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 0.12rem 0.6rem;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .badge-pill span {
      display: inline-flex;
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #777777);
    }

    .section-note {
      font-size: 0.82rem;
      color: var(--text-soft);
      margin-bottom: 0.6rem;
    }

    .button-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      margin-top: 0.6rem;
    }

    .button-row .btn {
      flex-shrink: 0;
    }

    .button-row .btn-outline {
      color: var(--accent-soft);
    }

    .button-row .btn-outline.danger {
      border-color: rgba(255, 75, 75, 0.8);
      color: #ff9b9b;
    }

    .button-row .btn-outline.danger:hover {
      background: rgba(255, 75, 75, 0.08);
    }

    .pill-number {
      padding: 0.14rem 0.6rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    .pill-number span.index {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 1.1rem;
      height: 1.1rem;
      border-radius: 999px;
      background: #ffffff;
      color: #000000;
      font-size: 0.72rem;
      font-weight: 600;
    }

    .signature-pad-wrapper {
      background: #0b0b0b;
      border-radius: 14px;
      border: 1px dashed rgba(255, 255, 255, 0.2);
      padding: 0.45rem 0.55rem 0.55rem;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .signature-pad-toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .signature-pad-toolbar button {
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.25);
      padding: 0.2rem 0.6rem;
      background: transparent;
      color: var(--accent-soft);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .signature-pad-toolbar button:hover {
      background: rgba(255, 255, 255, 0.06);
    }

    .signature-pad-canvas {
      width: 100%;
      height: 135px;
      border-radius: 10px;
      background: #000000;
      border: 1px solid rgba(255, 255, 255, 0.24);
      cursor: crosshair;
    }

    .file-input {
      border: 1px dashed rgba(255, 255, 255, 0.3);
      border-radius: 14px;
      padding: 0.55rem 0.7rem;
      font-size: 0.83rem;
      color: var(--text-soft);
      background: #0b0b0b;
    }

    .file-input input[type="file"] {
      width: 100%;
      font-size: 0.82rem;
      color: var(--text-soft);
    }

    .language-toggle {
      display: inline-flex;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.16);
      overflow: hidden;
    }

    .language-toggle button {
      border: none;
      padding: 0.28rem 0.7rem;
      font-size: 0.76rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      cursor: pointer;
      background: transparent;
      color: var(--text-muted);
    }

    .language-toggle button.active {
      background: #ffffff;
      color: #000000;
    }

    .lang-es {
      display: none;
    }

    .language-es-active .lang-es {
      display: inline;
    }

    .language-es-active .lang-en-only {
      display: none;
    }

    /* Billing information styles (from billing page) */
    .billing-wrapper {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 1.4rem;
      align-items: flex-start;
    }

    .billing-summary {
      padding: 0.9rem 1rem;
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: radial-gradient(circle at top left, #1f1f1f 0, #0c0c0c 42%, #050505 100%);
      font-size: 0.86rem;
      color: var(--text-soft);
    }

    .billing-summary h2 {
      font-size: 0.88rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 0.4rem;
      color: var(--accent-soft);
    }

    .billing-summary ul {
      margin: 0.3rem 0 0.6rem;
      padding-left: 1.15rem;
    }

    .billing-summary li {
      margin-bottom: 0.25rem;
    }

    .billing-summary .carrier-list {
      margin-top: 0.4rem;
      padding-top: 0.5rem;
      border-top: 1px dashed rgba(255, 255, 255, 0.12);
    }

    .billing-summary .carrier-item {
      display: flex;
      justify-content: space-between;
      gap: 0.4rem;
      margin-bottom: 0.18rem;
    }

    .billing-summary .carrier-name {
      color: var(--accent-soft);
    }

    .billing-summary .carrier-phone {
      color: var(--text-muted);
    }

    .accent-pill {
      font-size: 0.74rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      border-radius: 999px;
      padding: 0.16rem 0.7rem;
      border: 1px solid rgba(255, 255, 255, 0.24);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      color: var(--accent-soft);
    }

    .accent-pill span.dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #777777);
    }

    .note-box {
      border-radius: 16px;
      border: 1px dashed rgba(255, 255, 255, 0.22);
      padding: 0.65rem 0.75rem;
      font-size: 0.8rem;
      color: var(--text-muted);
      background: rgba(0, 0, 0, 0.55);
    }

    /* Invoice / Subcontractor boxes */
    .subcard-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1rem;
      margin-top: 0.7rem;
    }

    .subcard {
      border-radius: 18px;
      background: radial-gradient(circle at top left, #262626 0, #111 45%, #050505 100%);
      border: 1px solid rgba(255, 255, 255, 0.08);
      padding: 0.9rem 1rem;
      font-size: 0.84rem;
      color: var(--text-soft);
      position: relative;
      overflow: hidden;
    }

    .subcard::before {
      content: "";
      position: absolute;
      inset: -5%;
      background: radial-gradient(
        circle at top left,
        rgba(255, 255, 255, 0.08),
        transparent 55%
      );
      opacity: 0.5;
      pointer-events: none;
    }

    .subcard-label {
      font-size: 0.75rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent-soft);
      margin-bottom: 0.3rem;
    }

    .subcard-value {
      font-size: 0.9rem;
      color: var(--text-main);
      margin-bottom: 0.15rem;
    }

    .pill-tag {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 0.14rem 0.55rem;
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--text-muted);
    }

    .pill-tag span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #ffffff, #777777);
    }

    .card-subsection-title {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-soft);
      margin-bottom: 0.4rem;
    }

    .subdued-link {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .subdued-link a {
      color: var(--accent-soft);
    }

    .subdued-link a:hover {
      text-decoration: underline;
    }

    .language-note {
      font-size: 0.78rem;
      color: var(--text-muted);
      margin-top: 0.35rem;
    }

    .subtle-callout {
      border-radius: 14px;
      border: 1px dashed rgba(255, 255, 255, 0.2);
      padding: 0.55rem 0.75rem;
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-top: 0.4rem;
      background: rgba(0, 0, 0, 0.5);
    }

    .badge-row-cols {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.4rem 0.75rem;
      margin-top: 0.4rem;
    }

    .badge-row-cols .badge {
      width: 100%;
      justify-content: center;
      text-align: center;
    }

    .horizontal-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.45rem;
    }

    .horizontal-pill-row .pill-label {
      margin-bottom: 0;
    }

    /* Projects map styles */
    /* --------- PROJECTS MAP --------- */
    #projects-map {
      width: 100%;
      height: 380px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      overflow: hidden;
      margin-top: 0.9rem;
    }

    .project-photos {
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-subtle);
    }

    .project-photos-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 0.5rem;
    }

    .project-photos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 0.75rem;
      margin-top: 0.75rem;
    }

    .project-photos-grid img {
      width: 100%;
      display: block;
      border-radius: 12px;
      border: 1px solid var(--border-subtle);
      background: #000;
      object-fit: cover;
    }

    @media (max-width: 768px) {
      #projects-map {
        height: 320px;
      }
    }

    /* --------- RESPONSIVE --------- */
    @media (max-width: 960px) {
      .content {
        grid-template-columns: minmax(0, 1.9fr) minmax(0, 1.2fr);
      }

      .hero {
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
      }
    }

    @media (max-width: 820px) {
      .header-inner {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.7rem;
      }

      nav {
        width: 100%;
        justify-content: flex-start;
      }

      .content {
        grid-template-columns: minmax(0, 1fr);
      }

      .hero {
        grid-template-columns: minmax(0, 1fr);
      }

      .billing-wrapper {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 640px) {
      .header-inner {
        padding: 0.7rem 1rem 0.7rem;
      }

      .brand-name {
        font-size: 0.98rem;
      }

      nav {
        gap: 0.3rem;
      }

      .content {
        padding: 1.35rem 1rem 2.1rem;
      }

      .card {
        padding: 1.25rem 1.1rem 1.7rem;
      }

      .two-column,
      .hero {
        grid-template-columns: minmax(0, 1fr);
      }

      .form-grid,
      .form-grid-3 {
        grid-template-columns: minmax(0, 1fr);
      }

      .subcard-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }
  </style>

</head>
<body>
  <div class="page-wrap">
    <header>
      <div class="header-inner">
        <div class="brand-lockup">
          <div class="brand-logo">
            <!-- Replace with actual Anchor Homes logo -->
            <img src="https://via.placeholder.com/80x80?text=Anchor+Homes" alt="Anchor Homes Logo" />
          </div>
          <div class="brand-text">
            <div class="brand-name">ANCHOR HOMES LLC</div>
            <div class="brand-tagline">Middle Tennessee Construction &amp; Renovation</div>
          </div>
        </div>

        <nav>
          <button class="nav-link active" data-section="welcome">Welcome</button>
          <button class="nav-link" data-section="about">About Us</button>
          <button class="nav-link" data-section="services">Services</button>
          <button class="nav-link" data-section="projects">Projects</button>
          <button class="nav-link" data-section="change-requests">Change Request</button>
          <button class="nav-link" data-section="subcontractors">Invoices</button>
          <button class="nav-link" data-section="new-subcontractors">New Subcontractors</button>
          <button class="nav-link" data-section="contact">Contact</button>
        </nav>
      </div>
    </header>

    <main>
      <div class="content">
        <!-- --------- WELCOME --------- -->
        <section id="welcome" class="section active">
          <div class="card">
            <div class="hero">
              <div class="hero-copy">
                <div class="hero-eyebrow">
                  <span class="hero-eyebrow-badge">Licensed · Insured · Local</span>
                  Serving Middle Tennessee
                </div>
                <h1 class="hero-title">
                  <span>Renovations, New Builds,</span>
                  <span>and Everything In-Between.</span>
                </h1>
                <p class="hero-body">
                  Anchor Homes LLC is a full-service construction and renovation company
                  focused on quality craftsmanship, clear communication, and a smooth process from
                  first sketch to final walkthrough.
                </p>
                <div class="hero-cta-row">
                  <button class="btn btn-primary" data-jump="change-requests">
                    Request a Project Change
                  </button>
                  <button class="btn btn-outline" data-jump="subcontractors">
                    Submit an Invoice
                  </button>
                </div>
                <div class="hero-secondary-text">
                  <span>Need a quote or have questions?</span>
                  <span class="pill">Call or text &bull; (615) 555-0000</span>
                </div>
                <div class="hero-secondary-text" style="margin-top: 0.35rem;">
                  <span>E-mail</span>
                  <a href="mailto:info@anchorhomes.com">info@anchorhomes.com</a>
                </div>
              </div>

              <div class="hero-media">
                <div class="hero-frame">
                  <div class="hero-media-inner">
                    <div class="hero-slides">
                      <div class="hero-slide active"></div>
                      <div class="hero-slide"></div>
                      <div class="hero-slide"></div>
                      <div class="hero-slide-gradient"></div>
                    </div>
                    <div class="hero-meta-bar">
                      <div class="hero-meta-primary">
                        <div class="hero-meta-title">Featured Projects</div>
                        <div class="hero-meta-subtitle">
                          Kitchens · Whole-Home Renovations · Custom Builds
                        </div>
                      </div>
                      <div class="hero-metrics">
                        <span>Licensed &amp; Insured</span>
                        <span>Middle Tennessee</span>
                      </div>
                    </div>
                  </div>
                  <div class="hero-media-overlay"></div>
                </div>
              </div>
            </div>

            <div class="section-divider"></div>

            <div class="two-column">
              <div>
                <span class="pill-label">What We Do</span>
                <p class="muted">
                  From single-room updates to full home remodels, we handle framing, finishes,
                  exteriors, and custom details—coordinating every step so you don’t have to.
                </p>
                <div class="badge-row" style="margin-top:0.55rem;">
                  <span class="badge">Renovations</span>
                  <span class="badge">New Construction</span>
                  <span class="badge">Additions</span>
                  <span class="badge">Outdoor Living</span>
                </div>
              </div>
              <div>
                <span class="pill-label">How This Page Helps</span>
                <p class="muted">
                  Use the navigation above to submit project change requests, upload
                  subcontractor invoices, or send us your information as a new subcontractor.
                  Each form is designed to collect everything we need the first time, helping
                  us respond quickly and accurately.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- --------- ABOUT --------- -->
        <section id="about" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">About Us</h1>
              <p class="card-subtitle">
                Anchor Homes LLC is a locally-focused construction company built on trust, clarity,
                and craftsmanship.
              </p>
            </div>

            <div class="two-column">
              <div>
                <span class="pill-label">Our Approach</span>
                <p class="muted">
                  We believe successful projects are built on clear expectations and consistent
                  communication. From the first estimate to final walkthrough, our goal is to keep
                  you informed, supported, and confident in every decision.
                </p>
                <p class="muted" style="margin-top:0.6rem;">
                  We treat your home as if it were our own—protecting your space, respecting your
                  time, and planning schedules and trades to minimize disruption.
                </p>
              </div>
              <div>
                <span class="pill-label">What You Can Expect</span>
                <ul class="muted" style="padding-left:1.2rem; margin-top:0.2rem;">
                  <li>Transparent estimates and clear scopes of work</li>
                  <li>Professional, respectful crews and trade partners</li>
                  <li>Clean job sites and thoughtful scheduling</li>
                  <li>Regular updates on progress and next steps</li>
                  <li>Quality-focused work with attention to detail</li>
                </ul>
              </div>
            </div>

            <div class="section-divider"></div>

            <div class="two-column">
              <div>
                <div class="info-block">
                  <div class="info-label">Service Area</div>
                  <div class="info-value">
                    Franklin · Brentwood · Nolensville · Spring Hill · Nashville and the surrounding areas
                  </div>
                </div>
                <div class="info-block">
                  <div class="info-label">Project Types</div>
                  <div class="info-value">
                    Whole-home renovations, additions, kitchens and baths, exterior upgrades,
                    and select custom new-home builds.
                  </div>
                </div>
              </div>
              <div>
                <div class="info-block">
                  <div class="info-label">Ready to Talk?</div>
                  <div class="info-value">
                    Reach out using the Contact section, or submit details through the Change
                    Request form if you’re an existing client.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- --------- SERVICES --------- -->
        <section id="services" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Services</h1>
              <p class="card-subtitle">
                Residential and commercial construction services tailored to your project.
              </p>
            </div>

            <div class="two-column">
              <div>
                <h2 class="info-label" style="margin-bottom:0.4rem;">Residential Construction</h2>
                <ul class="muted" style="padding-left:1.2rem; margin-bottom:1.5rem;">
                  <li>Custom new-home builds</li>
                  <li>Whole-home renovations &amp; gut remodels</li>
                  <li>Kitchen &amp; bath remodels</li>
                  <li>Room additions &amp; second stories</li>
                  <li>Basement &amp; bonus room build-outs</li>
                  <li>Outdoor living spaces, decks, and covered porches</li>
                  <li>Exterior upgrades, siding, roofing, and windows</li>
                </ul>
              </div>
              <div>
                <h2 class="info-label" style="margin-bottom:0.4rem;">Light Commercial</h2>
                <ul class="muted" style="padding-left:1.2rem; margin-bottom:1.5rem;">
                  <li>Office and tenant build-outs</li>
                  <li>Retail refreshes and layout changes</li>
                  <li>Small multi-family renovations</li>
                  <li>Code-compliance work and interior reconfigurations</li>
                </ul>
              </div>
            </div>

            <div class="section-divider"></div>

            <div class="two-column">
              <div>
                <span class="pill-label">Existing Clients</span>
                <p class="muted">
                  If you already have an active project with us and need to adjust scope, finishes,
                  timelines, or allowances, use the Change Request section. It helps us document and
                  price changes quickly and accurately.
                </p>
              </div>
              <div>
                <span class="pill-label">Trade Partners &amp; Subcontractors</span>
                <p class="muted">
                  If you’re a subcontractor, you can upload invoices and project details through the
                  Invoices section, or share your information and W-9 through the New Subcontractors
                  section. This keeps everything organized and moving.
                </p>
              </div>
            </div>

            <div class="section-divider"></div>

            <span class="pill-label">Have Something Unique?</span>
            <p class="muted">
              If your project doesn’t quite fit the categories above, reach out through the Contact
              section to tell us more. We’ll be honest about whether we’re the right fit and can
              usually tailor a solution or point you to someone we trust.
            </p>
          </div>
        </section>

        <!-- --------- PROJECTS --------- -->
        <section id="projects" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Projects</h1>
              <p class="card-subtitle">
                Recent and current Anchor Homes projects across Middle Tennessee.
              </p>
            </div>

            <p class="muted">
              Use the map below to explore projects in the greater Middle Tennessee area.
              Tap / click a pin to see photos from that job.
            </p>

            <div id="projects-map"></div>

            <div id="project-photos" class="project-photos">
              <div class="project-photos-header">
                <div class="info-label" id="project-photos-title">
                  Project Photos
                </div>
                <div class="tiny-note" id="project-photos-location">
                  Click a pin on the map to load photos.
                </div>
              </div>

              <div class="project-photos-grid" id="project-photos-grid">
                <!-- Images will be injected here when a marker is clicked -->
              </div>
            </div>
          </div>
        </section>


        <!-- --------- CHANGE REQUEST --------- -->
        <section id="change-requests" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Change Request</h1>
              <p class="card-subtitle">
                Use this form to request changes to your current Anchor Homes project.
              </p>
            </div>

            <form
              action="https://formspree.io/f/xdkqdpgd"
              method="POST"
              enctype="multipart/form-data"
              id="change-request-form"
            >
              <input type="hidden" name="form_name" value="change-request" />

              <span class="pill-label">Step 1 · Project Information</span>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="cr-customer-name">Customer Name<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="cr-customer-name"
                    name="cr_customer_name"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="cr-project-address">Project Address<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="cr-project-address"
                    name="cr_project_address"
                    required
                  />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="cr-phone">Phone<span>*</span></label>
                  <input
                    class="form-input"
                    type="tel"
                    id="cr-phone"
                    name="cr_phone"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="cr-email">Email<span>*</span></label>
                  <input
                    class="form-input"
                    type="email"
                    id="cr-email"
                    name="cr_email"
                    required
                  />
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 2 · Change Details</span>

              <div class="form-field">
                <label class="form-label" for="cr-description">Describe Your Requested Change<span>*</span></label>
                <textarea
                  class="form-textarea"
                  id="cr-description"
                  name="cr_description"
                  placeholder="Please include room/area, materials or finishes you’d like, and any timing considerations."
                  required
                ></textarea>
                <p class="helper-text">
                  The more detail you can provide, the easier it is for us to price and schedule your change accurately.
                </p>
              </div>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="cr-budget">Rough Budget (if known)</label>
                  <input
                    class="form-input"
                    type="number"
                    step="0.01"
                    id="cr-budget"
                    name="cr_budget"
                    placeholder="Example: 2500"
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="cr-timing">Timing / Deadline</label>
                  <input
                    class="form-input"
                    type="text"
                    id="cr-timing"
                    name="cr_timing"
                    placeholder="Example: Before closing, before move-in, or flexible"
                  />
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 3 · Photos or Files (Optional)</span>

              <p class="tiny-note">
                You can attach photos, sketches, or inspiration images to help us understand your request.
              </p>

              <div class="file-input" style="margin-top:0.3rem;">
                <input
                  type="file"
                  id="cr-files"
                  name="cr_files"
                  accept=".jpg,.jpeg,.png,.pdf"
                  multiple
                />
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 4 · Confirmation</span>

              <div class="switch-row">
                <input type="checkbox" id="cr-confirm" name="cr_confirm" required />
                <label for="cr-confirm" class="tiny-note">
                  I understand this request may change the contract price and schedule and that Anchor Homes will
                  provide written confirmation of any approved changes before work proceeds.
                </label>
              </div>

              <div class="button-row">
                <button type="submit" class="btn btn-primary">Submit Change Request</button>
                <button type="reset" class="btn btn-outline">Clear Form</button>
              </div>
            </form>
          </div>
        </section>

        <!-- --------- SUBCONTRACTORS: INVOICES --------- -->
        <section id="subcontractors" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Subcontractor Invoices</h1>
              <p class="card-subtitle">
                Upload your invoice, project details, and supporting documents so we can process payment quickly.
              </p>
            </div>

            <div class="subcard-grid">
              <div class="subcard">
                <div class="subcard-label">For Trade Partners</div>
                <div class="subcard-value">Keep your invoices and job details in one place.</div>
                <p class="tiny-note">
                  Clearly label each invoice with the project address and scope performed (e.g., framing,
                  electrical rough-in, tile install). This helps us match your work to the right project and schedule.
                </p>
                <div style="margin-top:0.6rem;">
                  <span class="pill-tag">
                    <span class="dot"></span>
                    Invoices &amp; Job Details
                  </span>
                </div>
              </div>
              <div class="subcard">
                <div class="subcard-label">Need to Update Your Info?</div>
                <div class="subcard-value">
                  If your mailing address, contact, or insurance has changed, use the New Subcontractors section.
                </div>
                <p class="tiny-note">
                  Keeping your information current helps us avoid delays in processing payments and maintaining
                  compliance.
                </p>
              </div>
            </div>

            <div class="section-divider"></div>

            <form
              action="https://formspree.io/f/xdkqdpgd"
              method="POST"
              enctype="multipart/form-data"
              id="invoice-form"
            >
              <input type="hidden" name="form_name" value="subcontractor-invoice" />

              <span class="pill-label">Step 1 · Company &amp; Contact</span>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="inv-company-name">Company Name<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="inv-company-name"
                    name="inv_company_name"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="inv-contact-name">Contact Name<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="inv-contact-name"
                    name="inv_contact_name"
                    required
                  />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="inv-phone">Phone<span>*</span></label>
                  <input
                    class="form-input"
                    type="tel"
                    id="inv-phone"
                    name="inv_phone"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="inv-email">Email<span>*</span></label>
                  <input
                    class="form-input"
                    type="email"
                    id="inv-email"
                    name="inv_email"
                    required
                  />
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 2 · Project Details</span>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="inv-project-address">Project Address<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="inv-project-address"
                    name="inv_project_address"
                    required
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="inv-scope">Scope of Work<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="inv-scope"
                    name="inv_scope"
                    placeholder="Example: framing labor, tile install, electrical rough-in"
                    required
                  />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="inv-date-completed">Date Completed</label>
                  <input
                    class="form-input"
                    type="date"
                    id="inv-date-completed"
                    name="inv_date_completed"
                  />
                </div>

                <div class="form-field">
                  <label class="form-label" for="inv-po-number">PO / Job Number (if applicable)</label>
                  <input
                    class="form-input"
                    type="text"
                    id="inv-po-number"
                    name="inv_po_number"
                  />
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 3 · Invoice &amp; Supporting Files</span>

              <p class="tiny-note">
                Please upload your invoice as a PDF if possible. You can also attach photos or additional documents
                related to your work.
              </p>

              <div class="file-input" style="margin-top:0.3rem;">
                <input
                  type="file"
                  id="inv-file"
                  name="inv_file"
                  accept=".pdf,.jpg,.jpeg,.png"
                  required
                />
              </div>

              <div class="file-input" style="margin-top:0.6rem;">
                <label class="tiny-note" for="inv-supporting-files">Additional Photos or Supporting Files (Optional)</label>
                <input
                  type="file"
                  id="inv-supporting-files"
                  name="inv_supporting_files"
                  accept=".pdf,.jpg,.jpeg,.png"
                  multiple
                />
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 4 · Notes</span>

              <div class="form-field">
                <label class="form-label" for="inv-notes">Notes / Payment Details</label>
                <textarea
                  class="form-textarea"
                  id="inv-notes"
                  name="inv_notes"
                  placeholder="Include any special instructions, phase information, or notes we should know about this invoice."
                ></textarea>
              </div>

              <div class="button-row">
                <button type="submit" class="btn btn-primary">Submit Invoice</button>
                <button type="reset" class="btn btn-outline">Clear Form</button>
              </div>
            </form>
          </div>
        </section>

        <!-- --------- NEW SUBCONTRACTORS --------- -->
        <section id="new-subcontractors" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">New Subcontractors</h1>
              <p class="card-subtitle">
                Share your company information, upload your W-9 and insurance certificate, and sign our subcontractor
                agreement so we can add you to our active trade partners.
              </p>
            </div>

            <div class="subcard-grid">
              <div class="subcard">
                <div class="subcard-label">Why We Collect This</div>
                <div class="subcard-value">We want to pay you quickly and keep projects compliant.</div>
                <p class="tiny-note">
                  The information you provide here allows us to set you up correctly in our system for payment,
                  tax reporting, and insurance compliance. Thank you for taking a few minutes to complete it.
                </p>
              </div>
              <div class="subcard">
                <div class="subcard-label">Already Submitted?</div>
                <div class="subcard-value">
                  If you’ve already submitted this information and just need to update a W-9 or insurance certificate,
                  you can upload updated documents here and note “update only” in the comments.
                </div>
              </div>
            </div>

            <div class="section-divider"></div>

            <form
              id="subcontractor-form"
              action="https://formspree.io/f/xdkqdpgd"
              method="POST"
              enctype="multipart/form-data"
            >
              <input type="hidden" name="form_name" value="new-subcontractor" />
              <input type="hidden" id="generated_pdf" name="generated_pdf" />
              <input type="hidden" id="agreement_signature_data" name="agreement_signature_data" />
              <input type="hidden" id="w9_signature_data" name="w9_signature_data" />

              <span class="pill-label">Step 1 · Company Information</span>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="company-name">Company Name<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="company-name"
                    name="company_name"
                    required
                  />
                </div>
                <div class="form-field">
                  <label class="form-label" for="contact-name">Contact Name<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="contact-name"
                    name="contact_name"
                    required
                  />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="phone">Phone<span>*</span></label>
                  <input
                    class="form-input"
                    type="tel"
                    id="phone"
                    name="phone"
                    required
                  />
                </div>
                <div class="form-field">
                  <label class="form-label" for="email">Email<span>*</span></label>
                  <input
                    class="form-input"
                    type="email"
                    id="email"
                    name="email"
                    required
                  />
                </div>
              </div>

              <div class="form-field">
                <label class="form-label" for="mailing-address">Mailing Address<span>*</span></label>
                <input
                  class="form-input"
                  type="text"
                  id="mailing-address"
                  name="mailing_address"
                  required
                />
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 2 · W-9 Information</span>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="w9-name">Name (as shown on tax return)<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="w9-name"
                    name="w9_name"
                    required
                  />
                </div>
                <div class="form-field">
                  <label class="form-label" for="w9-business-name">Business Name / Disregarded Entity</label>
                  <input
                    class="form-input"
                    type="text"
                    id="w9-business-name"
                    name="w9_business_name"
                  />
                </div>
              </div>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="w9-entity-type">Federal Tax Classification<span>*</span></label>
                  <select
                    class="form-select"
                    id="w9-entity-type"
                    name="w9_entity_type"
                    required
                  >
                    <option value="">Select one</option>
                    <option value="individual">Individual / Sole Proprietor</option>
                    <option value="c-corp">C Corporation</option>
                    <option value="s-corp">S Corporation</option>
                    <option value="partnership">Partnership</option>
                    <option value="trust-estate">Trust / Estate</option>
                    <option value="llc">LLC</option>
                    <option value="other">Other</option>
                  </select>
                </div>

                <div class="form-field">
                  <label class="form-label" for="w9-ssn-ein">SSN or EIN<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="w9-ssn-ein"
                    name="w9_ssn_ein"
                    required
                  />
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 3 · Insurance Certificate</span>

              <div class="form-grid">
                <div class="form-field">
                  <label class="form-label" for="insurance-carrier">Insurance Carrier</label>
                  <input
                    class="form-input"
                    type="text"
                    id="insurance-carrier"
                    name="insurance_carrier"
                    placeholder="Example: General Liability &amp; Workers Comp carrier name"
                  />
                </div>
                <div class="form-field">
                  <label class="form-label" for="policy-limits">Policy Limits</label>
                  <input
                    class="form-input"
                    type="text"
                    id="policy-limits"
                    name="policy_limits"
                    placeholder="Example: $1,000,000 / $2,000,000 GL, Workers Comp statutory"
                  />
                </div>
              </div>

              <div class="file-input" style="margin-top:0.4rem;">
                <label class="tiny-note" for="insurance-certificate">
                  Upload Certificate of Insurance (PDF or image)
                </label>
                <input
                  type="file"
                  id="insurance-certificate"
                  name="insurance_certificate"
                  accept=".pdf,.jpg,.jpeg,.png"
                  required
                />
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 4 · Upload W-9</span>

              <div class="file-input">
                <label class="tiny-note" for="w9-upload">Upload Completed W-9 (PDF preferred)</label>
                <input
                  type="file"
                  id="w9-upload"
                  name="w9_upload"
                  accept=".pdf,.jpg,.jpeg,.png"
                  required
                />
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 5 · Subcontractor Agreement</span>

              <p class="tiny-note">
                Please review the subcontractor agreement below and sign electronically. A copy of your signed agreement
                and W-9 will be combined into a single PDF and sent to Anchor Homes.
              </p>

              <div id="agreement-text" style="
                margin-top:0.6rem;
                padding:0.75rem 0.85rem;
                border-radius:16px;
                border:1px solid rgba(255,255,255,0.18);
                background:rgba(0,0,0,0.55);
                max-height:260px;
                overflow:auto;
                font-size:0.82rem;
              ">
                <h3 style="margin-top:0;">Subcontractor Agreement</h3>
                <p>
                  This Subcontractor Agreement (“Agreement”) is entered into between Anchor Homes LLC (“Contractor”) and
                  the undersigned subcontractor (“Subcontractor”) for the provision of labor and/or materials on one or
                  more construction projects directed by Contractor.
                </p>
                <p>
                  Subcontractor agrees to perform all work in a professional, workmanlike manner consistent with industry
                  standards, applicable codes, and all requirements provided by Contractor. Subcontractor is responsible
                  for all labor, tools, equipment, supervision, and incidentals necessary to complete their scope of work.
                </p>
                <p>
                  Subcontractor acknowledges that they are an independent contractor and not an employee of Anchor Homes
                  LLC. Subcontractor is responsible for all applicable taxes, licenses, insurance, and compliance with
                  federal, state, and local laws.
                </p>
                <p>
                  Subcontractor shall maintain general liability and workers’ compensation insurance (where required by
                  law) in limits acceptable to Contractor and shall provide certificates of insurance naming Contractor as
                  a certificate holder upon request.
                </p>
                <p>
                  Payment terms will be as agreed on a project-by-project basis, typically upon satisfactory completion of
                  work and receipt of invoice, subject to applicable lien and retainage laws.
                </p>
                <p>
                  Additional project-specific terms may be provided in writing by Contractor and will be incorporated by
                  reference into this Agreement.
                </p>
                <p>
                  By signing below, Subcontractor acknowledges that they have read and agree to the terms of this
                  Agreement and that all information provided in connection with this form is true and correct.
                </p>
              </div>

              <div class="form-grid" style="margin-top:0.8rem;">
                <div class="form-field">
                  <label class="form-label" for="agreement-name">Name / Title<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="agreement-name"
                    name="agreement_name"
                    required
                  />
                </div>
                <div class="form-field">
                  <label class="form-label" for="agreement-date">Date<span>*</span></label>
                  <input
                    class="form-input"
                    type="date"
                    id="agreement-date"
                    name="agreement_date"
                    required
                  />
                </div>
              </div>

              <div class="form-field" style="margin-top:0.6rem;">
                <label class="form-label">Signature (Agreement)<span>*</span></label>
                <div class="signature-pad-wrapper">
                  <div class="signature-pad-toolbar">
                    <span>Draw your signature in the box</span>
                    <button type="button" id="clear-agreement-signature">
                      Clear
                    </button>
                  </div>
                  <canvas id="agreement-signature" class="signature-pad-canvas"></canvas>
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 6 · Sign W-9</span>

              <p class="tiny-note">
                Please sign your W-9 electronically below. This signature confirms that the information provided on your
                W-9 is accurate to the best of your knowledge.
              </p>

              <div class="form-grid" style="margin-top:0.6rem;">
                <div class="form-field">
                  <label class="form-label" for="w9-signature-name">Name<span>*</span></label>
                  <input
                    class="form-input"
                    type="text"
                    id="w9-signature-name"
                    name="w9_signature_name"
                    required
                  />
                </div>
                <div class="form-field">
                  <label class="form-label" for="w9-signature-date">Date<span>*</span></label>
                  <input
                    class="form-input"
                    type="date"
                    id="w9-signature-date"
                    name="w9_signature_date"
                    required
                  />
                </div>
              </div>

              <div class="form-field" style="margin-top:0.6rem;">
                <label class="form-label">Signature (W-9)<span>*</span></label>
                <div class="signature-pad-wrapper">
                  <div class="signature-pad-toolbar">
                    <span>Draw your W-9 signature</span>
                    <button type="button" id="clear-w9-signature">
                      Clear
                    </button>
                  </div>
                  <canvas id="w9-signature" class="signature-pad-canvas"></canvas>
                </div>
              </div>

              <div class="section-divider"></div>

              <span class="pill-label">Step 7 · Review &amp; Submit</span>
              <p class="tiny-note">
                When you click Submit, a PDF copy of your subcontractor agreement and W-9 (including your signatures)
                will be generated and sent securely to Anchor Homes along with your uploaded W-9 and insurance
                certificate.
              </p>

              <div class="button-row">
                <button type="submit" class="btn btn-primary">
                  Submit to Anchor Homes
                </button>
                <button type="reset" class="btn btn-outline">
                  Clear All
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- --------- CONTACT --------- -->
        <section id="contact" class="section">
          <div class="card">
            <div class="card-header">
              <h1 class="card-title">Contact</h1>
              <p class="card-subtitle">
                Reach out to Anchor Homes for questions, consultations, or project updates.
              </p>
            </div>

            <div class="two-column">
              <div>
                <div class="info-block">
                  <div class="info-label">Phone</div>
                  <div class="info-value">
                    <a href="tel:+16155550000">(615) 555-0000</a>
                  </div>
                </div>
                <div class="info-block">
                  <div class="info-label">Email</div>
                  <div class="info-value">
                    <a href="mailto:info@anchorhomes.com">info@anchorhomes.com</a>
                  </div>
                </div>
                <div class="info-block">
                  <div class="info-label">Business Address</div>
                  <div class="info-value">
                    1234 Anchor Way<br />
                    Suite 100<br />
                    Your City, ST 00000
                  </div>
                </div>
              </div>

              <div>
                <p class="muted">
                  Office hours, service areas, or additional contact notes can be listed here. For
                  example: “Meetings by appointment only,” or “Serving Williamson County and the
                  Greater Nashville area.”
                </p>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer>
      &copy; <span id="year"></span> Anchor Homes. All rights reserved.
    </footer>
  </div>

  
  <!-- Leaflet for interactive map -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-o9N1jRVvqbEExSCo9A+uH4Jv3Q9b8s7X3+HuxZiZ1t4="
    crossorigin=""
  ></script>

<!-- Signature Pad for drawing signatures -->
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
  <!-- html2pdf for generating PDF (0.10.1, official Worker API) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {

      /* ----- NAVIGATION ----- */
      const navLinks = document.querySelectorAll(".nav-link");
      const sections = document.querySelectorAll(".section");
      let projectsMap = null;
      let projectsMapInitialized = false;

      function activateSection(targetId) {
        navLinks.forEach((l) => {
          const id = l.getAttribute("data-section");
          l.classList.toggle("active", id === targetId);
        });
        sections.forEach((section) => {
          section.classList.toggle("active", section.id === targetId);
        });

        if (targetId === "projects") {
          initProjectsMap();
          if (projectsMap) {
            setTimeout(() => {
              projectsMap.invalidateSize();
            }, 50);
          }
        }
      }

      navLinks.forEach((link) => {
        link.addEventListener("click", () => {
          const targetId = link.getAttribute("data-section");
          activateSection(targetId);
        });
      });

      document.querySelectorAll("[data-jump]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.getAttribute("data-jump");
          if (targetId) {
            activateSection(targetId);
            window.scrollTo({ top: 0, behavior: "smooth" });
          }
        });
      });

      /* ----- YEAR IN FOOTER ----- */
      const yearSpan = document.getElementById("year");
      if (yearSpan) yearSpan.textContent = new Date().getFullYear();

      /* ----- HERO SLIDESHOW ----- */
      const slides = Array.from(document.querySelectorAll(".hero-slide"));
      if (slides.length > 1) {
        let order = slides.map((_, idx) => idx);
        function shuffle(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
        }
        shuffle(order);

        let currentIndex = 0;
        slides.forEach((slide, i) => {
          slide.classList.remove("active");
          if (i === order[0]) slide.classList.add("active");
        });

        setInterval(() => {
          const currentSlide = order[currentIndex];
          const nextIndex = (currentIndex + 1) % order.length;
          const nextSlide = order[nextIndex];

          slides[currentSlide].classList.remove("active");
          slides[nextSlide].classList.add("active");

          currentIndex = nextIndex;
        }, 5500);
      }

      /* ----- LANGUAGE TOGGLE (IF USED) ----- */
      const languageToggleButtons = document.querySelectorAll(".language-toggle button");
      const pageRoot = document.body;
      if (languageToggleButtons.length) {
        languageToggleButtons.forEach((btn) => {
          btn.addEventListener("click", () => {
            const lang = btn.getAttribute("data-lang");
            languageToggleButtons.forEach((b) => b.classList.remove("active"));
            btn.classList.add("active");
            if (lang === "es") {
              pageRoot.classList.add("language-es-active");
            } else {
              pageRoot.classList.remove("language-es-active");
            }
          });
        });
      }

      /* ----- BILLING PAGE LOGIC: HANDLE PAYMENT TYPE TOGGLE IF PRESENT ----- */
      const paymentTypeSelect = document.getElementById("payment-type");
      const eftFields = document.getElementById("eft-fields");
      const cardFields = document.getElementById("card-fields");

      function updatePaymentFields() {
        if (!paymentTypeSelect || !eftFields || !cardFields) return;
        const value = paymentTypeSelect.value;
        if (value === "eft") {
          eftFields.style.display = "grid";
          cardFields.style.display = "none";
        } else if (value === "card") {
          eftFields.style.display = "none";
          cardFields.style.display = "grid";
        } else {
          eftFields.style.display = "none";
          cardFields.style.display = "none";
        }
      }

      if (paymentTypeSelect) {
        paymentTypeSelect.addEventListener("change", updatePaymentFields);
        updatePaymentFields();
      }

      /* ----- PROJECTS MAP (MIDDLE TENNESSEE) ----- */
      function initProjectsMap() {
        const mapEl = document.getElementById("projects-map");
        if (!mapEl || typeof L === "undefined" || projectsMapInitialized) return;

        projectsMapInitialized = true;

        // Center roughly on Middle Tennessee (Old Hickory / Franklin / Nolensville)
        projectsMap = L.map("projects-map", {
          scrollWheelZoom: false,
        }).setView([36.0, -86.75], 9);

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          maxZoom: 19,
          attribution: "&copy; OpenStreetMap contributors",
        }).addTo(projectsMap);

        const projectsData = [
          {
            id: 1,
            name: "Old Hickory Multifamily Housing",
            locationLabel: "Old Hickory, TN",
            coords: [36.2590, -86.6472],
            photos: [
              "https://via.placeholder.com/400x260?text=Old+Hickory+Multifamily+1",
              "https://via.placeholder.com/400x260?text=Old+Hickory+Multifamily+2",
              "https://via.placeholder.com/400x260?text=Old+Hickory+Multifamily+3",
            ],
          },
          {
            id: 2,
            name: "Franklin Single-Family Home",
            locationLabel: "Franklin, TN",
            coords: [35.9251, -86.8689],
            photos: [
              "https://via.placeholder.com/400x260?text=Franklin+Home+1",
              "https://via.placeholder.com/400x260?text=Franklin+Home+2",
              "https://via.placeholder.com/400x260?text=Franklin+Home+3",
            ],
          },
          {
            id: 3,
            name: "Nolensville Single-Family Home",
            locationLabel: "Nolensville, TN",
            coords: [35.9540, -86.6692],
            photos: [
              "https://via.placeholder.com/400x260?text=Nolensville+Home+1",
              "https://via.placeholder.com/400x260?text=Nolensville+Home+2",
              "https://via.placeholder.com/400x260?text=Nolensville+Home+3",
            ],
          },
        ];

        const photosGridEl = document.getElementById("project-photos-grid");
        const photosTitleEl = document.getElementById("project-photos-title");
        const photosLocationEl = document.getElementById("project-photos-location");

        function showPhotos(project) {
          if (!photosGridEl) return;
          photosGridEl.innerHTML = "";

          if (photosTitleEl) {
            photosTitleEl.textContent = project.name;
          }
          if (photosLocationEl) {
            photosLocationEl.textContent = project.locationLabel;
          }

          project.photos.forEach((src) => {
            const img = document.createElement("img");
            img.src = src;
            img.alt = project.name + " photo";
            photosGridEl.appendChild(img);
          });
        }

        projectsData.forEach((project) => {
          const marker = L.marker(project.coords).addTo(projectsMap);
          marker.bindPopup(
            `<strong>${project.name}</strong><br><span style="font-size:0.8rem;color:#bbbbbb;">${project.locationLabel}</span>`
          );
          marker.on("click", () => {
            showPhotos(project);
          });
        });
      }

      /* ----- SIGNATURE PADS FOR NEW SUBCONTRACTOR FORM ----- */
      const agreementCanvas = document.getElementById("agreement-signature");
      const w9Canvas = document.getElementById("w9-signature");
      let agreementPad = null;
      let w9Pad = null;

      if (agreementCanvas && window.SignaturePad) {
        agreementPad = new SignaturePad(agreementCanvas, {
          backgroundColor: "#000000",
          penColor: "#ffffff",
        });
      }

      if (w9Canvas && window.SignaturePad) {
        w9Pad = new SignaturePad(w9Canvas, {
          backgroundColor: "#000000",
          penColor: "#ffffff",
        });
      }

      function resizeCanvas(canvas, pad) {
        if (!canvas || !pad) return;
        const ratio = Math.max(window.devicePixelRatio || 1, 1);
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * ratio;
        canvas.height = rect.height * ratio;
        canvas.getContext("2d").scale(ratio, ratio);
        pad.clear();
      }

      window.addEventListener("resize", () => {
        resizeCanvas(agreementCanvas, agreementPad);
        resizeCanvas(w9Canvas, w9Pad);
      });

      resizeCanvas(agreementCanvas, agreementPad);
      resizeCanvas(w9Canvas, w9Pad);

      const clearAgreementBtn = document.getElementById("clear-agreement-signature");
      if (clearAgreementBtn && agreementPad) {
        clearAgreementBtn.addEventListener("click", () => agreementPad.clear());
      }

      const clearW9Btn = document.getElementById("clear-w9-signature");
      if (clearW9Btn && w9Pad) {
        clearW9Btn.addEventListener("click", () => w9Pad.clear());
      }

      /* ----- PDF GENERATION FOR NEW SUBCONTRACTOR FORM ----- */
      const subcontractorForm = document.getElementById("subcontractor-form");

      async function generateSubcontractorPDF() {
        const {
          jsPDF
        } = window.jspdf || {};
        const html2pdfLib = window.html2pdf;

        if (!html2pdfLib) {
          alert("PDF library not loaded. Please try again or contact Anchor Homes.");
          throw new Error("html2pdf not available");
        }

        const agreementSigData = agreementPad && !agreementPad.isEmpty()
          ? agreementPad.toDataURL()
          : null;
        const w9SigData = w9Pad && !w9Pad.isEmpty()
          ? w9Pad.toDataURL()
          : null;

        const pseudoContainer = document.createElement("div");
        pseudoContainer.style.padding = "20px";
        pseudoContainer.style.fontFamily =
          'system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text","Segoe UI", sans-serif';
        pseudoContainer.style.color = "#000";
        pseudoContainer.style.fontSize = "12px";
        pseudoContainer.style.lineHeight = "1.5";

        const companyName = document.getElementById("company-name")?.value || "";
        const contactName = document.getElementById("contact-name")?.value || "";
        const phone = document.getElementById("phone")?.value || "";
        const email = document.getElementById("email")?.value || "";
        const mailingAddress = document.getElementById("mailing-address")?.value || "";
        const w9Name = document.getElementById("w9-name")?.value || "";
        const w9BusinessName = document.getElementById("w9-business-name")?.value || "";
        const w9EntityType = document.getElementById("w9-entity-type")?.value || "";
        const w9SsnEin = document.getElementById("w9-ssn-ein")?.value || "";
        const insuranceCarrier = document.getElementById("insurance-carrier")?.value || "";
        const policyLimits = document.getElementById("policy-limits")?.value || "";
        const agreementName = document.getElementById("agreement-name")?.value || "";
        const agreementDate = document.getElementById("agreement-date")?.value || "";
        const w9SignatureName = document.getElementById("w9-signature-name")?.value || "";
        const w9SignatureDate = document.getElementById("w9-signature-date")?.value || "";

        pseudoContainer.innerHTML = `
          <h1 style="margin-bottom:8px;">Anchor Homes LLC</h1>
          <h2 style="margin:0 0 16px;font-size:16px;">Subcontractor Packet</h2>

          <h3 style="margin:16px 0 6px;">1. Company Information</h3>
          <p><strong>Company Name:</strong> ${companyName}</p>
          <p><strong>Contact Name:</strong> ${contactName}</p>
          <p><strong>Phone:</strong> ${phone}</p>
          <p><strong>Email:</strong> ${email}</p>
          <p><strong>Mailing Address:</strong><br/>${mailingAddress.replace(/\n/g, "<br/>")}</p>

          <h3 style="margin:16px 0 6px;">2. W-9 Information</h3>
          <p><strong>Name (as shown on tax return):</strong> ${w9Name}</p>
          <p><strong>Business Name / Disregarded Entity:</strong> ${w9BusinessName}</p>
          <p><strong>Federal Tax Classification:</strong> ${w9EntityType}</p>
          <p><strong>SSN / EIN:</strong> ${w9SsnEin}</p>

          <h3 style="margin:16px 0 6px;">3. Insurance</h3>
          <p><strong>Insurance Carrier:</strong> ${insuranceCarrier}</p>
          <p><strong>Policy Limits:</strong> ${policyLimits}</p>

          <h3 style="margin:16px 0 6px;">4. Subcontractor Agreement</h3>
          <p><strong>Name / Title:</strong> ${agreementName}</p>
          <p><strong>Date:</strong> ${agreementDate}</p>
        `;
        const agreementTextEl = document.getElementById("agreement-text");
        if (agreementTextEl) {
          const agreementHeader = document.createElement("h3");
          agreementHeader.style.margin = "16px 0 6px";
          agreementHeader.textContent = "5. Subcontractor Agreement Text";
          pseudoContainer.appendChild(agreementHeader);

          const agreementBody = document.createElement("div");
          agreementBody.innerHTML = agreementTextEl.innerHTML;
          pseudoContainer.appendChild(agreementBody);
        }

        // Add signatures if present
        if (agreementSigData) {
          const sigHeader = document.createElement("h3");
          sigHeader.style.margin = "16px 0 6px";
          sigHeader.textContent = "6. Agreement Signature";
          pseudoContainer.appendChild(sigHeader);

          const sigImg = document.createElement("img");
          sigImg.src = agreementSigData;
          sigImg.style.maxWidth = "260px";
          sigImg.style.border = "1px solid #000";
          sigImg.style.display = "block";
          sigImg.style.marginBottom = "12px";
          pseudoContainer.appendChild(sigImg);
        }

        const w9SectionHeader = document.createElement("h3");
        w9SectionHeader.style.margin = "16px 0 6px";
        w9SectionHeader.textContent = "7. W-9 Signature";
        pseudoContainer.appendChild(w9SectionHeader);

        const w9Meta = document.createElement("p");
        w9Meta.innerHTML =
          "<strong>Name:</strong> " +
          (w9SignatureName || "") +
          "<br/><strong>Date:</strong> " +
          (w9SignatureDate || "");
        pseudoContainer.appendChild(w9Meta);

        if (w9SigData) {
          const w9Img = document.createElement("img");
          w9Img.src = w9SigData;
          w9Img.style.maxWidth = "260px";
          w9Img.style.border = "1px solid #000";
          w9Img.style.display = "block";
          w9Img.style.marginTop = "6px";
          pseudoContainer.appendChild(w9Img);
        }

        // Store raw signature images on form as well
        const agreementSigField = document.getElementById("agreement_signature_data");
        if (agreementSigField) {
          agreementSigField.value = agreementSigData || "";
        }
        const w9SigField = document.getElementById("w9_signature_data");
        if (w9SigField) {
          w9SigField.value = w9SigData || "";
        }

        // Generate PDF as data URI using html2pdf
        const pdfOptions = {
          margin: 0.5,
          filename: "anchor-homes-subcontractor.pdf",
          image: { type: "jpeg", quality: 0.95 },
          html2canvas: { scale: 2, useCORS: true },
          jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
        };

        const dataUri = await html2pdfLib()
          .set(pdfOptions)
          .from(pseudoContainer)
          .outputPdf("datauristring");

        const pdfField = document.getElementById("generated_pdf");
        if (pdfField) {
          pdfField.value = dataUri;
        }
      }

      if (subcontractorForm) {
        let isSubmitting = false;
        subcontractorForm.addEventListener("submit", async (event) => {
          if (isSubmitting) return;

          // Ensure signatures are present
          if (!agreementPad || agreementPad.isEmpty()) {
            alert("Please sign the Subcontractor Agreement before submitting.");
            event.preventDefault();
            return;
          }
          if (!w9Pad || w9Pad.isEmpty()) {
            alert("Please sign the W-9 before submitting.");
            event.preventDefault();
            return;
          }

          event.preventDefault();

          try {
            await generateSubcontractorPDF();
          } catch (err) {
            console.error("Error generating PDF:", err);
            // Allow submission without PDF if generation fails
          }

          isSubmitting = true;
          subcontractorForm.submit();
        });
      }
    });
  </script>
</body>
</html>
